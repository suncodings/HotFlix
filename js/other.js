!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.PhotoSwipe=t()}(this,function(){"use strict";return function(m,n,e,t){var p={features:null,bind:function(e,t,n,i){var a=(i?"remove":"add")+"EventListener";t=t.split(" ");for(var o=0;o<t.length;o++)t[o]&&e[a](t[o],n,!1)},isArray:function(e){return e instanceof Array},createEl:function(e,t){t=document.createElement(t||"div");return e&&(t.className=e),t},getScrollY:function(){var e=window.pageYOffset;return void 0!==e?e:document.documentElement.scrollTop},unbind:function(e,t,n){p.bind(e,t,n,!0)},removeClass:function(e,t){t=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(t," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(e,t){p.hasClass(e,t)||(e.className+=(e.className?" ":"")+t)},hasClass:function(e,t){return e.className&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)},getChildByClass:function(e,t){for(var n=e.firstChild;n;){if(p.hasClass(n,t))return n;n=n.nextSibling}},arraySearch:function(e,t,n){for(var i=e.length;i--;)if(e[i][n]===t)return i;return-1},extend:function(e,t,n){for(var i in t)if(t.hasOwnProperty(i)){if(n&&e.hasOwnProperty(i))continue;e[i]=t[i]}},easing:{sine:{out:function(e){return Math.sin(e*(Math.PI/2))},inOut:function(e){return-(Math.cos(Math.PI*e)-1)/2}},cubic:{out:function(e){return--e*e*e+1}}},detectFeatures:function(){if(p.features)return p.features;var e,t,n=p.createEl().style,i="",a={};a.oldIE=document.all&&!document.addEventListener,a.touch="ontouchstart"in window,window.requestAnimationFrame&&(a.raf=window.requestAnimationFrame,a.caf=window.cancelAnimationFrame),a.pointerEvent=navigator.pointerEnabled||navigator.msPointerEnabled,a.pointerEvent||(e=navigator.userAgent,!/iP(hone|od)/.test(navigator.platform)||(t=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/))&&0<t.length&&(1<=(t=parseInt(t[1],10))&&t<8&&(a.isOldIOSPhone=!0)),t=(t=e.match(/Android\s([0-9\.]*)/))?t[1]:0,1<=(t=parseFloat(t))&&(t<4.4&&(a.isOldAndroid=!0),a.androidVersion=t),a.isMobileOpera=/opera mini|opera mobi/i.test(e));for(var o,s,r,l=["transform","perspective","animationName"],c=["","webkit","Moz","ms","O"],u=0;u<4;u++){i=c[u];for(var d=0;d<3;d++)o=l[d],s=i+(i?o.charAt(0).toUpperCase()+o.slice(1):o),!a[o]&&s in n&&(a[o]=s);i&&!a.raf&&(i=i.toLowerCase(),a.raf=window[i+"RequestAnimationFrame"],a.raf&&(a.caf=window[i+"CancelAnimationFrame"]||window[i+"CancelRequestAnimationFrame"]))}return a.raf||(r=0,a.raf=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-r)),i=window.setTimeout(function(){e(t+n)},n);return r=t+n,i},a.caf=function(e){clearTimeout(e)}),a.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,p.features=a}};p.detectFeatures(),p.features.oldIE&&(p.bind=function(e,t,n,i){t=t.split(" ");for(var a,o=(i?"detach":"attach")+"Event",s=function(){n.handleEvent.call(n)},r=0;r<t.length;r++)if(a=t[r])if("object"==typeof n&&n.handleEvent){if(i){if(!n["oldIE"+a])return!1}else n["oldIE"+a]=s;e[o]("on"+a,n["oldIE"+a])}else e[o]("on"+a,n)});var f=this,g={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,verticalDragRange:.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(e){return"A"===e.tagName},getDoubleTapZoom:function(e,t){return e||t.initialZoomLevel<.7?1:1.33},maxSpreadZoom:1.33,modal:!0,scaleMode:"fit"};p.extend(g,t);function i(){return{x:0,y:0}}function a(e,t){p.extend(f,t.publicMethods),Qe.push(e)}function s(e){var t=Zt();return t-1<e?e-t:e<0?t+e:e}function o(e,t){return et[e]||(et[e]=[]),et[e].push(t)}function y(e){var t=et[e];if(t){var n=Array.prototype.slice.call(arguments);n.shift();for(var i=0;i<t.length;i++)t[i].apply(f,n)}}function u(){return(new Date).getTime()}function v(e){qe=e,f.bg.style.opacity=e*g.bgOpacity}function r(e,t,n,i,a){(!Je||a&&a!==f.currItem)&&(i/=(a||f.currItem).fitRatio),e[re]=Q+t+"px, "+n+"px"+$+" scale("+i+")"}function d(e,t){var n;!g.loop&&t&&(n=z+(Ye.x*Ze-e)/Ye.x,t=Math.round(e-wt.x),(n<0&&0<t||n>=Zt()-1&&t<0)&&(e=wt.x+t*g.mainScrollEndFriction)),wt.x=e,it(e,B)}function l(e,t){var n=kt[e]-Ke[e];return ze[e]+Ve[e]+n-t/X*n}function b(e,t){e.x=t.x,e.y=t.y,t.id&&(e.id=t.id)}function c(e){e.x=Math.round(e.x),e.y=Math.round(e.y)}function h(e,t){return e=Qt(f.currItem,We,e),t&&(Ne=e),e}function w(e){return(e=e||f.currItem).initialZoomLevel}function k(e){return 0<(e=e||f.currItem).w?g.maxSpreadZoom:1}function T(e,t,n,i){return i===f.currItem.initialZoomLevel?(n[e]=f.currItem.initialPosition[e],!0):(n[e]=l(e,i),n[e]>t.min[e]?(n[e]=t.min[e],!0):n[e]<t.max[e]&&(n[e]=t.max[e],!0))}function x(e){var t="";g.escKey&&27===e.keyCode?t="close":g.arrowKeys&&(37===e.keyCode?t="prev":39===e.keyCode&&(t="next")),t&&(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||(e.preventDefault?e.preventDefault():e.returnValue=!1,f[t]()))}function C(e){e&&(Se||Ae||Oe||Te)&&(e.preventDefault(),e.stopPropagation())}function E(){f.setScrollOffset(0,p.getScrollY())}function A(e){st[e]&&(st[e].raf&&de(st[e].raf),rt--,delete st[e])}function S(e){st[e]&&A(e),st[e]||(rt++,st[e]={})}function I(){for(var e in st)st.hasOwnProperty(e)&&A(e)}function M(e,t,n,i,a,o,s){var r,l=u();S(e);var c=function(){if(st[e]){if(r=u()-l,i<=r)return A(e),o(n),void(s&&s());o((n-t)*a(r/i)+t),st[e].raf=ue(c)}};c()}function P(e,t){return gt.x=Math.abs(e.x-t.x),gt.y=Math.abs(e.y-t.y),Math.sqrt(gt.x*gt.x+gt.y*gt.y)}function _(e,t){return At.prevent=!Et(e.target,g.isClickableElement),y("preventDragEvent",e,t,At),At.prevent}function L(e,t){return t.x=e.pageX,t.y=e.pageY,t.id=e.identifier,t}function N(e,t,n){n.x=.5*(e.x+t.x),n.y=.5*(e.y+t.y)}function D(){var e=Be.y-f.currItem.initialPosition.y;return 1-Math.abs(e/(We.y/2))}function O(e){for(;0<Mt.length;)Mt.pop();return le?(Ue=0,mt.forEach(function(e){0===Ue?Mt[0]=e:1===Ue&&(Mt[1]=e),Ue++})):-1<e.type.indexOf("touch")?e.touches&&0<e.touches.length&&(Mt[0]=L(e.touches[0],St),1<e.touches.length&&(Mt[1]=L(e.touches[1],It))):(St.x=e.pageX,St.y=e.pageY,St.id="",Mt[0]=St),Mt}function F(e,t){var n,i,a,o=Be[e]+t[e],s=0<t[e],r=wt.x+t.x,l=wt.x-pt.x,c=o>Ne.min[e]||o<Ne.max[e]?g.panEndFriction:1,o=Be[e]+t[e]*c;return!g.allowPanToNext&&G!==f.currItem.initialZoomLevel||(De?"h"!==Fe||"x"!==e||Ae||(s?(o>Ne.min[e]&&(c=g.panEndFriction,Ne.min[e],n=Ne.min[e]-ze[e]),(n<=0||l<0)&&1<Zt()?(a=r,l<0&&r>pt.x&&(a=pt.x)):Ne.min.x!==Ne.max.x&&(i=o)):(o<Ne.max[e]&&(c=g.panEndFriction,Ne.max[e],n=ze[e]-Ne.max[e]),(n<=0||0<l)&&1<Zt()?(a=r,0<l&&r<pt.x&&(a=pt.x)):Ne.min.x!==Ne.max.x&&(i=o))):a=r,"x"!==e)?void(Oe||Me||G>f.currItem.fitRatio&&(Be[e]+=t[e]*c)):(void 0!==a&&(d(a,!0),Me=a!==pt.x),Ne.min.x!==Ne.max.x&&(void 0!==i?Be.x=i:Me||(Be.x+=t.x*c)),void 0!==a)}function R(e){var t;"mousedown"===e.type&&0<e.button||(Bt?e.preventDefault():xe&&"mousedown"===e.type||(_(e,!0)&&e.preventDefault(),y("pointerDown"),le&&((t=p.arraySearch(mt,e.pointerId,"id"))<0&&(t=mt.length),mt[t]={x:e.pageX,y:e.pageY,id:e.pointerId}),e=(t=O(e)).length,Pe=null,I(),Ce&&1!==e||(Ce=Re=!0,p.bind(window,Z,f),ke=je=He=Te=Me=Se=Ee=Ae=!1,Fe=null,y("firstTouchStart",t),b(ze,Be),Ve.x=Ve.y=0,b(dt,t[0]),b(ht,dt),pt.x=Ye.x*Ze,ft=[{x:dt.x,y:dt.y}],be=ve=u(),h(G,!0),xt(),Ct()),!_e&&1<e&&!Oe&&!Me&&(X=G,_e=Ee=!(Ae=!1),Ve.y=Ve.x=0,b(ze,Be),b(lt,t[0]),b(ct,t[1]),N(lt,ct,Tt),kt.x=Math.abs(Tt.x)-Be.x,kt.y=Math.abs(Tt.y)-Be.y,Le=P(lt,ct))))}function H(e){var t,n;e.preventDefault(),le&&-1<(t=p.arraySearch(mt,e.pointerId,"id"))&&((n=mt[t]).x=e.pageX,n.y=e.pageY),Ce&&(n=O(e),Fe||Se||_e?Pe=n:wt.x!==Ye.x*Ze?Fe="h":(e=Math.abs(n[0].x-dt.x)-Math.abs(n[0].y-dt.y),10<=Math.abs(e)&&(Fe=0<e?"h":"v",Pe=n)))}function q(e){if(ge.isOldAndroid){if(xe&&"mouseup"===e.type)return;-1<e.type.indexOf("touch")&&(clearTimeout(xe),xe=setTimeout(function(){xe=0},600))}y("pointerUp"),_(e,!1)&&e.preventDefault(),!le||-1<(n=p.arraySearch(mt,e.pointerId,"id"))&&(o=mt.splice(n,1)[0],navigator.pointerEnabled?o.type=e.pointerType||"mouse":(o.type={4:"mouse",2:"touch",3:"pen"}[e.pointerType],o.type||(o.type=e.pointerType||"mouse")));var t=O(e),n=t.length;if("mouseup"===e.type&&(n=0),2===n)return!(Pe=null);1===n&&b(ht,t[0]),0!==n||Fe||Oe||(o||("mouseup"===e.type?o={x:e.pageX,y:e.pageY,type:"mouse"}:e.changedTouches&&e.changedTouches[0]&&(o={x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY,type:"touch"})),y("touchRelease",e,o));var i,a,o=-1;if(0===n&&(Ce=!1,p.unbind(window,Z,f),xt(),_e?o=0:-1!==bt&&(o=u()-bt)),bt=1===n?u():-1,o=-1!==o&&o<150?"zoom":"swipe",_e&&n<2&&(_e=!1,1===n&&(o="zoomPointerUp"),y("zoomGestureEnded")),Pe=null,Se||Ae||Oe||Te)if(I(),(we=we||_t()).calculateSwipeSpeed("x"),Te)D()<g.verticalDragRange?f.close():(i=Be.y,a=qe,M("verticalDrag",0,1,300,p.easing.cubic.out,function(e){Be.y=(f.currItem.initialPosition.y-i)*e+i,v((1-a)*e+a),tt()}),y("onVerticalDrag",1));else{if((Me||Oe)&&0===n){if(Nt(o,we))return;o="zoomPointerUp"}if(!Oe)return"swipe"!==o?void Ot():void(!Me&&G>f.currItem.fitRatio&&Lt(we))}}var j,U,V,z,B,W,Z,K,Y,G,X,Q,$,J,ee,te,ne,ie,ae,oe,se,re,le,ce,ue,de,he,me,pe,fe,ge,ye,ve,be,we,ke,Te,xe,Ce,Ee,Ae,Se,Ie,Me,Pe,_e,Le,Ne,De,Oe,Fe,Re,He,qe,je,Ue,Ve=i(),ze=i(),Be=i(),We={},Ze=0,Ke={},Ye=i(),Ge=0,Xe=!0,Qe=[],$e={},Je=!1,et={},tt=function(e){De&&(e&&(G>f.currItem.fitRatio?Je||($t(f.currItem,!1,!0),Je=!0):Je&&($t(f.currItem),Je=!1)),r(De,Be.x,Be.y,G))},nt=function(e){e.container&&r(e.container.style,e.initialPosition.x,e.initialPosition.y,e.initialZoomLevel,e)},it=function(e,t){t[re]=Q+e+"px, 0px"+$},at=null,ot=function(){at&&(p.unbind(document,"mousemove",ot),p.addClass(m,"pswp--has_mouse"),g.mouseUsed=!0,y("mouseUsed")),at=setTimeout(function(){at=null},100)},st={},rt=0,t={shout:y,listen:o,viewportSize:We,options:g,isMainScrollAnimating:function(){return Oe},getZoomLevel:function(){return G},getCurrentIndex:function(){return z},isDragging:function(){return Ce},isZooming:function(){return _e},setScrollOffset:function(e,t){Ke.x=e,fe=Ke.y=t,y("updateScrollOffset",Ke)},applyZoomPan:function(e,t,n,i){Be.x=t,Be.y=n,G=e,tt(i)},init:function(){if(!j&&!U){var e;f.framework=p,f.template=m,f.bg=p.getChildByClass(m,"pswp__bg"),he=m.className,j=!0,ge=p.detectFeatures(),ue=ge.raf,de=ge.caf,re=ge.transform,pe=ge.oldIE,f.scrollWrap=p.getChildByClass(m,"pswp__scroll-wrap"),f.container=p.getChildByClass(f.scrollWrap,"pswp__container"),B=f.container.style,f.itemHolders=te=[{el:f.container.children[0],wrap:0,index:-1},{el:f.container.children[1],wrap:0,index:-1},{el:f.container.children[2],wrap:0,index:-1}],te[0].el.style.display=te[2].el.style.display="none",function(){if(re){var e=ge.perspective&&!ce;return Q="translate"+(e?"3d(":"("),$=ge.perspective?", 0px)":")"}re="left",p.addClass(m,"pswp--ie"),it=function(e,t){t.left=e+"px"},nt=function(e){var t=1<e.fitRatio?1:e.fitRatio,n=e.container.style,i=t*e.w,t=t*e.h;n.width=i+"px",n.height=t+"px",n.left=e.initialPosition.x+"px",n.top=e.initialPosition.y+"px"},tt=function(){var e,t,n,i;De&&(e=De,n=(t=1<(i=f.currItem).fitRatio?1:i.fitRatio)*i.w,i=t*i.h,e.width=n+"px",e.height=i+"px",e.left=Be.x+"px",e.top=Be.y+"px")}}(),Y={resize:f.updateSize,orientationchange:function(){clearTimeout(ye),ye=setTimeout(function(){We.x!==f.scrollWrap.clientWidth&&f.updateSize()},500)},scroll:E,keydown:x,click:C};var t=ge.isOldIOSPhone||ge.isOldAndroid||ge.isMobileOpera;for(ge.animationName&&ge.transform&&!t||(g.showAnimationDuration=g.hideAnimationDuration=0),e=0;e<Qe.length;e++)f["init"+Qe[e]]();n&&(f.ui=new n(f,p)).init(),y("firstUpdate"),z=z||g.index||0,(isNaN(z)||z<0||z>=Zt())&&(z=0),f.currItem=Wt(z),(ge.isOldIOSPhone||ge.isOldAndroid)&&(Xe=!1),m.setAttribute("aria-hidden","false"),g.modal&&(Xe?m.style.position="fixed":(m.style.position="absolute",m.style.top=p.getScrollY()+"px")),void 0===fe&&(y("initialLayout"),fe=me=p.getScrollY());t="pswp--open ";for(g.mainClass&&(t+=g.mainClass+" "),g.showHideOpacity&&(t+="pswp--animate_opacity "),t+=ce?"pswp--touch":"pswp--notouch",t+=ge.animationName?" pswp--css_animation":"",t+=ge.svg?" pswp--svg":"",p.addClass(m,t),f.updateSize(),W=-1,Ge=null,e=0;e<3;e++)it((e+W)*Ye.x,te[e].el.style);pe||p.bind(f.scrollWrap,K,f),o("initialZoomInEnd",function(){f.setContent(te[0],z-1),f.setContent(te[2],z+1),te[0].el.style.display=te[2].el.style.display="block",g.focus&&m.focus(),p.bind(document,"keydown",f),ge.transform&&p.bind(f.scrollWrap,"click",f),g.mouseUsed||p.bind(document,"mousemove",ot),p.bind(window,"resize scroll orientationchange",f),y("bindEvents")}),f.setContent(te[1],z),f.updateCurrItem(),y("afterInit"),Xe||(J=setInterval(function(){rt||Ce||_e||G!==f.currItem.initialZoomLevel||f.updateSize()},1e3)),p.addClass(m,"pswp--visible")}},close:function(){j&&(U=!(j=!1),y("close"),p.unbind(window,"resize scroll orientationchange",f),p.unbind(window,"scroll",Y.scroll),p.unbind(document,"keydown",f),p.unbind(document,"mousemove",ot),ge.transform&&p.unbind(f.scrollWrap,"click",f),Ce&&p.unbind(window,Z,f),clearTimeout(ye),y("unbindEvents"),Kt(f.currItem,null,!0,f.destroy))},destroy:function(){y("destroy"),Ut&&clearTimeout(Ut),m.setAttribute("aria-hidden","true"),m.className=he,J&&clearInterval(J),p.unbind(f.scrollWrap,K,f),p.unbind(window,"scroll",f),xt(),I(),et=null},panTo:function(e,t,n){n||(e>Ne.min.x?e=Ne.min.x:e<Ne.max.x&&(e=Ne.max.x),t>Ne.min.y?t=Ne.min.y:t<Ne.max.y&&(t=Ne.max.y)),Be.x=e,Be.y=t,tt()},handleEvent:function(e){e=e||window.event,Y[e.type]&&Y[e.type](e)},goTo:function(e){var t=(e=s(e))-z;Ge=t,z=e,f.currItem=Wt(z),Ze-=t,d(Ye.x*Ze),I(),Oe=!1,f.updateCurrItem()},next:function(){f.goTo(z+1)},prev:function(){f.goTo(z-1)},updateCurrZoomItem:function(e){var t;e&&y("beforeChange",0),De=te[1].el.children.length?(t=te[1].el.children[0],p.hasClass(t,"pswp__zoom-wrap")?t.style:null):null,Ne=f.currItem.bounds,X=G=f.currItem.initialZoomLevel,Be.x=Ne.center.x,Be.y=Ne.center.y,e&&y("afterChange")},invalidateCurrItems:function(){ee=!0;for(var e=0;e<3;e++)te[e].item&&(te[e].item.needsUpdate=!0)},updateCurrItem:function(e){if(0!==Ge){var t,n=Math.abs(Ge);if(!(e&&n<2)){f.currItem=Wt(z),Je=!1,y("beforeChange",Ge),3<=n&&(W+=Ge+(0<Ge?-3:3),n=3);for(var i=0;i<n;i++)0<Ge?(t=te.shift(),te[2]=t,it((++W+2)*Ye.x,t.el.style),f.setContent(t,z-n+i+1+1)):(t=te.pop(),te.unshift(t),it(--W*Ye.x,t.el.style),f.setContent(t,z+n-i-1-1));!De||1!==Math.abs(Ge)||(e=Wt(ne)).initialZoomLevel!==G&&(Qt(e,We),$t(e),nt(e)),Ge=0,f.updateCurrZoomItem(),ne=z,y("afterChange")}}},updateSize:function(e){if(!Xe&&g.modal){var t=p.getScrollY();if(fe!==t&&(m.style.top=t+"px",fe=t),!e&&$e.x===window.innerWidth&&$e.y===window.innerHeight)return;$e.x=window.innerWidth,$e.y=window.innerHeight,m.style.height=$e.y+"px"}if(We.x=f.scrollWrap.clientWidth,We.y=f.scrollWrap.clientHeight,E(),Ye.x=We.x+Math.round(We.x*g.spacing),Ye.y=We.y,d(Ye.x*Ze),y("beforeResize"),void 0!==W){for(var n,i,a,o=0;o<3;o++)n=te[o],it((o+W)*Ye.x,n.el.style),a=z+o-1,g.loop&&2<Zt()&&(a=s(a)),(i=Wt(a))&&(ee||i.needsUpdate||!i.bounds)?(f.cleanSlide(i),f.setContent(n,a),1===o&&(f.currItem=i,f.updateCurrZoomItem(!0)),i.needsUpdate=!1):-1===n.index&&0<=a&&f.setContent(n,a),i&&i.container&&(Qt(i,We),$t(i),nt(i));ee=!1}X=G=f.currItem.initialZoomLevel,(Ne=f.currItem.bounds)&&(Be.x=Ne.center.x,Be.y=Ne.center.y,tt(!0)),y("resize")},zoomTo:function(t,e,n,i,a){e&&(X=G,kt.x=Math.abs(e.x)-Be.x,kt.y=Math.abs(e.y)-Be.y,b(ze,Be));var e=h(t,!1),o={};T("x",e,o,t),T("y",e,o,t);var s=G,r=Be.x,l=Be.y;c(o);e=function(e){1===e?(G=t,Be.x=o.x,Be.y=o.y):(G=(t-s)*e+s,Be.x=(o.x-r)*e+r,Be.y=(o.y-l)*e+l),a&&a(e),tt(1===e)};n?M("customZoomTo",0,1,n,i||p.easing.sine.inOut,e):e(1)}},lt={},ct={},ut={},dt={},ht={},mt=[],pt={},ft=[],gt={},yt=0,vt=i(),bt=0,wt=i(),kt=i(),Tt=i(),xt=function(){Ie&&(de(Ie),Ie=null)},Ct=function(){Ce&&(Ie=ue(Ct),Pt())},Et=function(e,t){return!(!e||e===document)&&!(e.getAttribute("class")&&-1<e.getAttribute("class").indexOf("pswp__scroll-wrap"))&&(t(e)?e:Et(e.parentNode,t))},At={},St={},It={},Mt=[],Pt=function(){if(Pe){var e=Pe.length;if(0!==e)if(b(lt,Pe[0]),ut.x=lt.x-dt.x,ut.y=lt.y-dt.y,_e&&1<e)dt.x=lt.x,dt.y=lt.y,(ut.x||ut.y||(o=Pe[1],s=ct,o.x!==s.x||o.y!==s.y))&&(b(ct,Pe[1]),Ae||(Ae=!0,y("zoomGestureStarted")),i=P(lt,ct),(a=Dt(i))>f.currItem.initialZoomLevel+f.currItem.initialZoomLevel/15&&(je=!0),n=1,e=w(),o=k(),a<e?g.pinchToClose&&!je&&X<=f.currItem.initialZoomLevel?(v(s=1-(e-a)/(e/1.2)),y("onPinchClose",s),He=!0):(1<(n=(e-a)/e)&&(n=1),a=e-n*(e/3)):o<a&&(1<(n=(a-o)/(6*e))&&(n=1),a=o+n*e),n<0&&(n=0),N(lt,ct,vt),Ve.x+=vt.x-Tt.x,Ve.y+=vt.y-Tt.y,b(Tt,vt),Be.x=l("x",a),Be.y=l("y",a),ke=G<a,G=a,tt());else if(Fe&&(Re&&(Re=!1,10<=Math.abs(ut.x)&&(ut.x-=Pe[0].x-ht.x),10<=Math.abs(ut.y)&&(ut.y-=Pe[0].y-ht.y)),dt.x=lt.x,dt.y=lt.y,0!==ut.x||0!==ut.y)){if("v"===Fe&&g.closeOnVerticalDrag&&"fit"===g.scaleMode&&G===f.currItem.initialZoomLevel){Ve.y+=ut.y,Be.y+=ut.y;var t=D();return Te=!0,y("onVerticalDrag",t),v(t),void tt()}n=u(),i=lt.x,a=lt.y,50<n-be&&((t=2<ft.length?ft.shift():{}).x=i,t.y=a,ft.push(t),be=n),Se=!0,Ne=f.currItem.bounds,F("x",ut)||(F("y",ut),c(Be),tt())}}var n,i,a,o,s},_t=function(){var t,n,i={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(e){n=1<ft.length?(t=u()-be+50,ft[ft.length-2][e]):(t=u()-ve,ht[e]),i.lastFlickOffset[e]=dt[e]-n,i.lastFlickDist[e]=Math.abs(i.lastFlickOffset[e]),20<i.lastFlickDist[e]?i.lastFlickSpeed[e]=i.lastFlickOffset[e]/t:i.lastFlickSpeed[e]=0,Math.abs(i.lastFlickSpeed[e])<.1&&(i.lastFlickSpeed[e]=0),i.slowDownRatio[e]=.95,i.slowDownRatioReverse[e]=1-i.slowDownRatio[e],i.speedDecelerationRatio[e]=1},calculateOverBoundsAnimOffset:function(t,e){i.backAnimStarted[t]||(Be[t]>Ne.min[t]?i.backAnimDestination[t]=Ne.min[t]:Be[t]<Ne.max[t]&&(i.backAnimDestination[t]=Ne.max[t]),void 0!==i.backAnimDestination[t]&&(i.slowDownRatio[t]=.7,i.slowDownRatioReverse[t]=1-i.slowDownRatio[t],i.speedDecelerationRatioAbs[t]<.05&&(i.lastFlickSpeed[t]=0,i.backAnimStarted[t]=!0,M("bounceZoomPan"+t,Be[t],i.backAnimDestination[t],e||300,p.easing.sine.out,function(e){Be[t]=e,tt()}))))},calculateAnimOffset:function(e){i.backAnimStarted[e]||(i.speedDecelerationRatio[e]=i.speedDecelerationRatio[e]*(i.slowDownRatio[e]+i.slowDownRatioReverse[e]-i.slowDownRatioReverse[e]*i.timeDiff/10),i.speedDecelerationRatioAbs[e]=Math.abs(i.lastFlickSpeed[e]*i.speedDecelerationRatio[e]),i.distanceOffset[e]=i.lastFlickSpeed[e]*i.speedDecelerationRatio[e]*i.timeDiff,Be[e]+=i.distanceOffset[e])},panAnimLoop:function(){if(st.zoomPan&&(st.zoomPan.raf=ue(i.panAnimLoop),i.now=u(),i.timeDiff=i.now-i.lastNow,i.lastNow=i.now,i.calculateAnimOffset("x"),i.calculateAnimOffset("y"),tt(),i.calculateOverBoundsAnimOffset("x"),i.calculateOverBoundsAnimOffset("y"),i.speedDecelerationRatioAbs.x<.05&&i.speedDecelerationRatioAbs.y<.05))return Be.x=Math.round(Be.x),Be.y=Math.round(Be.y),tt(),void A("zoomPan")}};return i},Lt=function(e){return e.calculateSwipeSpeed("y"),Ne=f.currItem.bounds,e.backAnimDestination={},e.backAnimStarted={},Math.abs(e.lastFlickSpeed.x)<=.05&&Math.abs(e.lastFlickSpeed.y)<=.05?(e.speedDecelerationRatioAbs.x=e.speedDecelerationRatioAbs.y=0,e.calculateOverBoundsAnimOffset("x"),e.calculateOverBoundsAnimOffset("y"),!0):(S("zoomPan"),e.lastNow=u(),void e.panAnimLoop())},Nt=function(e,t){var n,i;Oe||(yt=z),"swipe"===e&&(i=dt.x-ht.x,e=t.lastFlickDist.x<10,30<i&&(e||20<t.lastFlickOffset.x)?o=-1:i<-30&&(e||t.lastFlickOffset.x<-20)&&(o=1)),o&&((z+=o)<0?(z=g.loop?Zt()-1:0,a=!0):z>=Zt()&&(z=g.loop?0:Zt()-1,a=!0),a&&!g.loop||(Ge+=o,Ze-=o,n=!0));var a=Ye.x*Ze,o=Math.abs(a-wt.x),s=n||a>wt.x==0<t.lastFlickSpeed.x?(s=0<Math.abs(t.lastFlickSpeed.x)?o/Math.abs(t.lastFlickSpeed.x):333,s=Math.min(s,400),Math.max(s,250)):333;return yt===z&&(n=!1),Oe=!0,y("mainScrollAnimStart"),M("mainScroll",wt.x,a,s,p.easing.cubic.out,d,function(){I(),Oe=!1,yt=-1,!n&&yt===z||f.updateCurrItem(),y("mainScrollAnimComplete")}),n&&f.updateCurrItem(!0),n},Dt=function(e){return 1/Le*e*X},Ot=function(){var e=G,t=w(),n=k();G<t?e=t:n<G&&(e=n);var i,a=qe;return He&&!ke&&!je&&G<t?f.close():(He&&(i=function(e){v((1-a)*e+a)}),f.zoomTo(e,0,200,p.easing.cubic.out,i)),!0};a("Gestures",{publicMethods:{initGestures:function(){function e(e,t,n,i,a){ie=e+t,ae=e+n,oe=e+i,se=a?e+a:""}(le=ge.pointerEvent)&&ge.touch&&(ge.touch=!1),le?navigator.pointerEnabled?e("pointer","down","move","up","cancel"):e("MSPointer","Down","Move","Up","Cancel"):ge.touch?(e("touch","start","move","end","cancel"),ce=!0):e("mouse","down","move","up"),Z=ae+" "+oe+" "+se,K=ie,le&&!ce&&(ce=1<navigator.maxTouchPoints||1<navigator.msMaxTouchPoints),f.likelyTouchDevice=ce,Y[ie]=R,Y[ae]=H,Y[oe]=q,se&&(Y[se]=Y[oe]),ge.touch&&(K+=" mousedown",Z+=" mousemove mouseup",Y.mousedown=Y[ie],Y.mousemove=Y[ae],Y.mouseup=Y[oe]),ce||(g.allowPanToNext=!1)}}});function Ft(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}}function Rt(e,t,n,i,a,o){t.loadError||i&&(t.imageAppended=!0,$t(t,i,t===f.currItem&&Je),n.appendChild(i),o&&setTimeout(function(){t&&t.loaded&&t.placeholder&&(t.placeholder.style.display="none",t.placeholder=null)},500))}function Ht(e){function t(){e.loading=!1,e.loaded=!0,e.loadComplete?e.loadComplete(e):e.img=null,n.onload=n.onerror=null,n=null}e.loading=!0,e.loaded=!1;var n=e.img=p.createEl("pswp__img","img");return n.onload=t,n.onerror=function(){e.loadError=!0,t()},n.src=e.src,n}function qt(e,t){return e.src&&e.loadError&&e.container&&(t&&(e.container.innerHTML=""),e.container.innerHTML=g.errorMsg.replace("%url%",e.src),1)}function jt(){if(Gt.length){for(var e,t=0;t<Gt.length;t++)(e=Gt[t]).holder.index===e.index&&Rt(e.index,e.item,e.baseDiv,e.img,0,e.clearPlaceholder);Gt=[]}}var Ut,Vt,zt,Bt,Wt,Zt,Kt=function(s,e,r,t){var l;Ut&&clearTimeout(Ut),zt=Bt=!0,s.initialLayout?(l=s.initialLayout,s.initialLayout=null):l=g.getThumbBoundsFn&&g.getThumbBoundsFn(z);function c(){A("initialZoom"),r?(f.template.removeAttribute("style"),f.bg.removeAttribute("style")):(v(1),e&&(e.style.display="block"),p.addClass(m,"pswp--animated-in"),y("initialZoom"+(r?"OutEnd":"InEnd"))),t&&t(),Bt=!1}var u=r?g.hideAnimationDuration:g.showAnimationDuration;if(!u||!l||void 0===l.x)return y("initialZoom"+(r?"Out":"In")),G=s.initialZoomLevel,b(Be,s.initialPosition),tt(),m.style.opacity=r?0:1,v(1),void(u?setTimeout(function(){c()},u):c());var d,h;d=V,h=!f.currItem.src||f.currItem.loadError||g.showHideOpacity,s.miniImg&&(s.miniImg.style.webkitBackfaceVisibility="hidden"),r||(G=l.w/s.w,Be.x=l.x,Be.y=l.y-me,f[h?"template":"bg"].style.opacity=.001,tt()),S("initialZoom"),r&&!d&&p.removeClass(m,"pswp--animated-in"),h&&(r?p[(d?"remove":"add")+"Class"](m,"pswp--animate_opacity"):setTimeout(function(){p.addClass(m,"pswp--animate_opacity")},30)),Ut=setTimeout(function(){var t,n,i,a,o,e;y("initialZoom"+(r?"Out":"In")),r?(t=l.w/s.w,n=Be.x,i=Be.y,a=G,o=qe,e=function(e){1===e?(G=t,Be.x=l.x,Be.y=l.y-fe):(G=(t-a)*e+a,Be.x=(l.x-n)*e+n,Be.y=(l.y-fe-i)*e+i),tt(),h?m.style.opacity=1-e:v(o-e*o)},d?M("initialZoom",0,1,u,p.easing.cubic.out,e,c):(e(1),Ut=setTimeout(c,u+20))):(G=s.initialZoomLevel,b(Be,s.initialPosition),tt(),v(1),h?m.style.opacity=1:v(1),Ut=setTimeout(c,u+20))},r?25:90)},Yt={},Gt=[],Xt={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return Vt.length}},Qt=function(e,t,n){if(!e.src||e.loadError)return e.w=e.h=0,e.initialZoomLevel=e.fitRatio=1,e.bounds=Ft(),e.initialPosition=e.bounds.center,e.bounds;var i,a,o,s=!n;return s&&(e.vGap||(e.vGap={top:0,bottom:0}),y("parseVerticalMargin",e)),Yt.x=t.x,Yt.y=t.y-e.vGap.top-e.vGap.bottom,s&&(i=Yt.x/e.w,a=Yt.y/e.h,e.fitRatio=i<a?i:a,"orig"===(o=g.scaleMode)?n=1:"fit"===o&&(n=e.fitRatio),1<n&&(n=1),e.initialZoomLevel=n,e.bounds||(e.bounds=Ft())),n?(i=(t=e).w*n,a=e.h*n,(o=t.bounds).center.x=Math.round((Yt.x-i)/2),o.center.y=Math.round((Yt.y-a)/2)+t.vGap.top,o.max.x=i>Yt.x?Math.round(Yt.x-i):o.center.x,o.max.y=a>Yt.y?Math.round(Yt.y-a)+t.vGap.top:o.center.y,o.min.x=i>Yt.x?0:o.center.x,o.min.y=a>Yt.y?t.vGap.top:o.center.y,s&&n===e.initialZoomLevel&&(e.initialPosition=e.bounds.center),e.bounds):void 0},$t=function(e,t,n){var i;e.src&&(t=t||e.container.lastChild,i=n?e.w:Math.round(e.w*e.fitRatio),n=n?e.h:Math.round(e.h*e.fitRatio),e.placeholder&&!e.loaded&&(e.placeholder.style.width=i+"px",e.placeholder.style.height=n+"px"),t.style.width=i+"px",t.style.height=n+"px")};a("Controller",{publicMethods:{lazyLoadItem:function(e){e=s(e);var t=Wt(e);t&&(!t.loaded&&!t.loading||ee)&&(y("gettingData",e,t),t.src&&Ht(t))},initController:function(){p.extend(g,Xt,!0),f.items=Vt=e,Wt=f.getItemAt,Zt=g.getNumItemsFn,g.loop,Zt()<3&&(g.loop=!1),o("beforeChange",function(e){for(var t=g.preload,n=null===e||0<=e,i=Math.min(t[0],Zt()),a=Math.min(t[1],Zt()),o=1;o<=(n?a:i);o++)f.lazyLoadItem(z+o);for(o=1;o<=(n?i:a);o++)f.lazyLoadItem(z-o)}),o("initialLayout",function(){f.currItem.initialLayout=g.getThumbBoundsFn&&g.getThumbBoundsFn(z)}),o("mainScrollAnimComplete",jt),o("initialZoomInEnd",jt),o("destroy",function(){for(var e,t=0;t<Vt.length;t++)(e=Vt[t]).container&&(e.container=null),e.placeholder&&(e.placeholder=null),e.img&&(e.img=null),e.preloader&&(e.preloader=null),e.loadError&&(e.loaded=e.loadError=!1);Gt=null})},getItemAt:function(e){return 0<=e&&void 0!==Vt[e]&&Vt[e]},allowProgressiveImg:function(){return g.forceProgressiveLoading||!ce||g.mouseUsed||1200<screen.width},setContent:function(t,n){g.loop&&(n=s(n));var e=f.getItemAt(t.index);e&&(e.container=null);var i,a,o=f.getItemAt(n);o?(y("gettingData",n,o),t.index=n,a=(t.item=o).container=p.createEl("pswp__zoom-wrap"),!o.src&&o.html&&(o.html.tagName?a.appendChild(o.html):a.innerHTML=o.html),qt(o),Qt(o,We),!o.src||o.loadError||o.loaded?o.src&&!o.loadError&&((i=p.createEl("pswp__img","img")).style.opacity=1,i.src=o.src,$t(o,i),Rt(0,o,a,i)):(o.loadComplete=function(e){if(j){if(t&&t.index===n){if(qt(e,!0))return e.loadComplete=e.img=null,Qt(e,We),nt(e),void(t.index===z&&f.updateCurrZoomItem());e.imageAppended?!Bt&&e.placeholder&&(e.placeholder.style.display="none",e.placeholder=null):ge.transform&&(Oe||Bt)?Gt.push({item:e,baseDiv:a,img:e.img,index:n,holder:t,clearPlaceholder:!0}):Rt(0,e,a,e.img,0,!0)}e.loadComplete=null,e.img=null,y("imageLoadComplete",n,e)}},p.features.transform&&(e="pswp__img pswp__img--placeholder",e+=o.msrc?"":" pswp__img--placeholder--blank",e=p.createEl(e,o.msrc?"img":""),o.msrc&&(e.src=o.msrc),$t(o,e),a.appendChild(e),o.placeholder=e),o.loading||Ht(o),f.allowProgressiveImg()&&(!zt&&ge.transform?Gt.push({item:o,baseDiv:a,img:o.img,index:n,holder:t}):Rt(0,o,a,o.img,0,!0))),zt||n!==z?nt(o):(De=a.style,Kt(o,i||o.img)),t.el.innerHTML="",t.el.appendChild(a)):t.el.innerHTML=""},cleanSlide:function(e){e.img&&(e.img.onload=e.img.onerror=null),e.loaded=e.loading=e.img=e.imageAppended=!1}}});function Jt(e,t,n){var i=document.createEvent("CustomEvent"),n={origEvent:e,target:e.target,releasePoint:t,pointerType:n||"touch"};i.initCustomEvent("pswpTap",!0,!0,n),e.target.dispatchEvent(i)}var en,tn,nn={};a("Tap",{publicMethods:{initTap:function(){o("firstTouchStart",f.onTapStart),o("touchRelease",f.onTapRelease),o("destroy",function(){nn={},en=null})},onTapStart:function(e){1<e.length&&(clearTimeout(en),en=null)},onTapRelease:function(e,t){var n,i,a;!t||Se||Ee||rt||(n=t,en&&(clearTimeout(en),en=null,i=n,a=nn,Math.abs(i.x-a.x)<25&&Math.abs(i.y-a.y)<25)?y("doubleTap",n):"mouse"!==t.type?"BUTTON"===e.target.tagName.toUpperCase()||p.hasClass(e.target,"pswp__single-tap")?Jt(e,t):(b(nn,n),en=setTimeout(function(){Jt(e,t),en=null},300)):Jt(e,t,"mouse"))}}}),a("DesktopZoom",{publicMethods:{initDesktopZoom:function(){pe||(ce?o("mouseUsed",function(){f.setupDesktopZoom()}):f.setupDesktopZoom(!0))},setupDesktopZoom:function(e){tn={};var t="wheel mousewheel DOMMouseScroll";o("bindEvents",function(){p.bind(m,t,f.handleMouseWheel)}),o("unbindEvents",function(){tn&&p.unbind(m,t,f.handleMouseWheel)}),f.mouseZoomedIn=!1;function n(){f.mouseZoomedIn&&(p.removeClass(m,"pswp--zoomed-in"),f.mouseZoomedIn=!1),G<1?p.addClass(m,"pswp--zoom-allowed"):p.removeClass(m,"pswp--zoom-allowed"),a()}var i,a=function(){i&&(p.removeClass(m,"pswp--dragging"),i=!1)};o("resize",n),o("afterChange",n),o("pointerDown",function(){f.mouseZoomedIn&&(i=!0,p.addClass(m,"pswp--dragging"))}),o("pointerUp",a),e||n()},handleMouseWheel:function(e){if(G<=f.currItem.fitRatio)return g.modal&&(!g.closeOnScroll||rt||Ce?e.preventDefault():re&&2<Math.abs(e.deltaY)&&(V=!0,f.close())),!0;if(e.stopPropagation(),tn.x=0,"deltaX"in e)1===e.deltaMode?(tn.x=18*e.deltaX,tn.y=18*e.deltaY):(tn.x=e.deltaX,tn.y=e.deltaY);else if("wheelDelta"in e)e.wheelDeltaX&&(tn.x=-.16*e.wheelDeltaX),e.wheelDeltaY?tn.y=-.16*e.wheelDeltaY:tn.y=-.16*e.wheelDelta;else{if(!("detail"in e))return;tn.y=e.detail}h(G,!0);var t=Be.x-tn.x,n=Be.y-tn.y;(g.modal||t<=Ne.min.x&&t>=Ne.max.x&&n<=Ne.min.y&&n>=Ne.max.y)&&e.preventDefault(),f.panTo(t,n)},toggleDesktopZoom:function(e){e=e||{x:We.x/2+Ke.x,y:We.y/2+Ke.y};var t=g.getDoubleTapZoom(!0,f.currItem),n=G===t;f.mouseZoomedIn=!n,f.zoomTo(n?f.currItem.initialZoomLevel:t,e,333),p[(n?"remove":"add")+"Class"](m,"pswp--zoomed-in")}}});function an(){return yn.hash.substring(1)}function on(){rn&&clearTimeout(rn),cn&&clearTimeout(cn)}function sn(){var e=an(),t={};if(e.length<5)return t;var n,i=e.split("&");for(o=0;o<i.length;o++)i[o]&&((n=i[o].split("=")).length<2||(t[n[0]]=n[1]));if(g.galleryPIDs){for(var a=t.pid,o=t.pid=0;o<Vt.length;o++)if(Vt[o].pid===a){t.pid=o;break}}else t.pid=parseInt(t.pid,10)-1;return t.pid<0&&(t.pid=0),t}var rn,ln,cn,un,dn,hn,mn,pn,fn,gn,yn,vn,bn={history:!0,galleryUID:1},wn=function(){var e,t;cn&&clearTimeout(cn),rt||Ce?cn=setTimeout(wn,500):(un?clearTimeout(ln):un=!0,t=z+1,(e=Wt(z)).hasOwnProperty("pid")&&(t=e.pid),e=mn+"&gid="+g.galleryUID+"&pid="+t,pn||-1===yn.hash.indexOf(e)&&(gn=!0),t=yn.href.split("#")[0]+"#"+e,vn?"#"+e!==window.location.hash&&history[pn?"replaceState":"pushState"]("",document.title,t):pn?yn.replace(t):yn.hash=e,pn=!0,ln=setTimeout(function(){un=!1},60))};a("History",{publicMethods:{initHistory:function(){var e,t;p.extend(g,bn,!0),g.history&&(yn=window.location,pn=fn=gn=!1,mn=an(),vn="pushState"in history,-1<mn.indexOf("gid=")&&(mn=(mn=mn.split("&gid=")[0]).split("?gid=")[0]),o("afterChange",f.updateURL),o("unbindEvents",function(){p.unbind(window,"hashchange",f.onHashChange)}),e=function(){hn=!0,fn||(gn?history.back():mn?yn.hash=mn:vn?history.pushState("",document.title,yn.pathname+yn.search):yn.hash=""),on()},o("unbindEvents",function(){V&&e()}),o("destroy",function(){hn||e()}),o("firstUpdate",function(){z=sn().pid}),-1<(t=mn.indexOf("pid="))&&("&"===(mn=mn.substring(0,t)).slice(-1)&&(mn=mn.slice(0,-1))),setTimeout(function(){j&&p.bind(window,"hashchange",f.onHashChange)},40))},onHashChange:function(){return an()===mn?(fn=!0,void f.close()):void(un||(dn=!0,f.goTo(sn().pid),dn=!1))},updateURL:function(){on(),dn||(pn?rn=setTimeout(wn,800):wn())}}}),p.extend(f,t)}}),"object"==typeof navigator&&function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Plyr",t):(e=e||self).Plyr=t()}(this,function(){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function e(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,a=!1,o=void 0;try{for(var s,r=e[Symbol.iterator]();!(i=(s=r.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){a=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function a(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function t(e){return null!=e?e.constructor:null}function n(e,t){return Boolean(e&&t&&e instanceof t)}function s(e){return null==e}function l(e){return t(e)===Object}function c(e){return t(e)===String}function u(e){return Array.isArray(e)}function h(e){return n(e,NodeList)}var m={addCSS:!0,thumbWidth:15,watch:!0},p={nullOrUndefined:s,object:l,number:function(e){return t(e)===Number&&!Number.isNaN(e)},string:c,boolean:function(e){return t(e)===Boolean},function:function(e){return t(e)===Function},array:u,nodeList:h,element:function(e){return n(e,Element)},event:function(e){return n(e,Event)},empty:function(e){return s(e)||(c(e)||u(e)||h(e))&&!e.length||l(e)&&!Object.keys(e).length}};function f(e){return null!=e?e.constructor:null}function g(e,t){return Boolean(e&&t&&e instanceof t)}function y(e){return null==e}function v(e){return f(e)===Object}function b(e){return f(e)===String}function w(e){return Array.isArray(e)}function k(e){return g(e,NodeList)}function T(e){return y(e)||(b(e)||w(e)||k(e))&&!e.length||v(e)&&!Object.keys(e).length}var x,C,E=(e(I,[{key:"init",value:function(){I.enabled&&(this.config.addCSS&&(this.element.style.userSelect="none",this.element.style.webKitUserSelect="none",this.element.style.touchAction="manipulation"),this.listeners(!0),this.element.rangeTouch=this)}},{key:"destroy",value:function(){I.enabled&&(this.listeners(!1),this.element.rangeTouch=null)}},{key:"listeners",value:function(e){var t=this,n=e?"addEventListener":"removeEventListener";["touchstart","touchmove","touchend"].forEach(function(e){t.element[n](e,function(e){return t.set(e)},!1)})}},{key:"get",value:function(e){if(!I.enabled||!p.event(e))return null;var t=e.target,n=e.changedTouches[0],i=parseFloat(t.getAttribute("min"))||0,a=parseFloat(t.getAttribute("max"))||100,o=parseFloat(t.getAttribute("step"))||1,e=a-i,a=t.getBoundingClientRect(),t=100/a.width*(this.config.thumbWidth/2)/100;return(a=100/a.width*(n.clientX-a.left))<0?a=0:100<a&&(a=100),a<50?a-=(100-2*a)*t:50<a&&(a+=2*(a-50)*t),i+function(e,t){if(t<1){n=(n="".concat(t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/))?Math.max(0,(n[1]?n[1].length:0)-(n[2]?+n[2]:0)):0;return parseFloat(e.toFixed(n))}var n;return Math.round(e/t)*t}(a/100*e,o)}},{key:"set",value:function(e){var t;I.enabled&&p.event(e)&&!e.target.disabled&&(e.preventDefault(),e.target.value=this.get(e),t=e.target,e="touchend"===e.type?"change":"input",t&&e&&(e=new Event(e),t.dispatchEvent(e)))}}],[{key:"setup",value:function(n){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=null;if(p.empty(n)||p.string(n)?e=Array.from(document.querySelectorAll(p.string(n)?n:'input[type="range"]')):p.element(n)?e=[n]:p.nodeList(n)?e=Array.from(n):p.array(n)&&(e=n.filter(p.element)),p.empty(e))return null;var i=Object.assign({},m,t);return p.string(n)&&i.watch&&new MutationObserver(function(e){Array.from(e).forEach(function(e){Array.from(e.addedNodes).forEach(function(e){var t;p.element(e)&&function(){return Array.from(document.querySelectorAll(t)).includes(this)}.call(e,t=n)&&new I(e,i)})})}).observe(document.body,{childList:!0,subtree:!0}),e.map(function(e){return new I(e,t)})}},{key:"enabled",get:function(){return"ontouchstart"in document.documentElement}}]),I),A={nullOrUndefined:y,object:v,number:function(e){return f(e)===Number&&!Number.isNaN(e)},string:b,boolean:function(e){return f(e)===Boolean},function:function(e){return f(e)===Function},array:w,weakMap:function(e){return g(e,WeakMap)},nodeList:k,element:function(e){return g(e,Element)},textNode:function(e){return f(e)===Text},event:function(e){return g(e,Event)},keyboardEvent:function(e){return g(e,KeyboardEvent)},cue:function(e){return g(e,window.TextTrackCue)||g(e,window.VTTCue)},track:function(e){return g(e,TextTrack)||!y(e)&&b(e.kind)},promise:function(e){return g(e,Promise)},url:function(e){if(g(e,window.URL))return!0;if(!b(e))return!1;var t=e;e.startsWith("http://")&&e.startsWith("https://")||(t="http://".concat(e));try{return!T(new URL(t).hostname)}catch(e){return!1}},empty:T},S=(x=document.createElement("span"),C={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},Je=Object.keys(C).find(function(e){return void 0!==x.style[e]}),!!A.string(Je)&&C[Je]);function I(e,t){r(this,I),p.element(e)?this.element=e:p.string(e)&&(this.element=document.querySelector(e)),p.element(this.element)&&p.empty(this.element.rangeTouch)&&(this.config=Object.assign({},m,t),this.init())}function M(e,t){setTimeout(function(){try{e.hidden=!0,e.offsetHeight,e.hidden=!1}catch(e){}},t)}var P={isIE:!!document.documentMode,isEdge:window.navigator.userAgent.includes("Edge"),isWebkit:"WebkitAppearance"in document.documentElement.style&&!/Edge/.test(navigator.userAgent),isIPhone:/(iPhone|iPod)/gi.test(navigator.platform),isIos:/(iPad|iPhone|iPod)/gi.test(navigator.platform)},_=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){return e=!0,null}});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(e){}return e}();function L(t,e,n){var i,a=this,o=3<arguments.length&&void 0!==arguments[3]&&arguments[3],s=!(4<arguments.length&&void 0!==arguments[4])||arguments[4],r=5<arguments.length&&void 0!==arguments[5]&&arguments[5];t&&"addEventListener"in t&&!A.empty(e)&&A.function(n)&&(e=e.split(" "),i=_?{passive:s,capture:r}:r,e.forEach(function(e){a&&a.eventListeners&&o&&a.eventListeners.push({element:t,type:e,callback:n,options:i}),t[o?"addEventListener":"removeEventListener"](e,n,i)}))}function N(e){L.call(this,e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",2<arguments.length?arguments[2]:void 0,!0,!(3<arguments.length&&void 0!==arguments[3])||arguments[3],4<arguments.length&&void 0!==arguments[4]&&arguments[4])}function D(e){L.call(this,e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",2<arguments.length?arguments[2]:void 0,!1,!(3<arguments.length&&void 0!==arguments[3])||arguments[3],4<arguments.length&&void 0!==arguments[4]&&arguments[4])}function O(a){var o=this,s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",r=2<arguments.length?arguments[2]:void 0,l=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],c=4<arguments.length&&void 0!==arguments[4]&&arguments[4];L.call(this,a,s,function e(){D(a,s,e,l,c);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];r.apply(o,n)},!0,l,c)}function F(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};A.element(e)&&!A.empty(t)&&(i=new CustomEvent(t,{bubbles:n,detail:Object.assign({},i,{plyr:this})}),e.dispatchEvent(i))}function R(e,t){return t.split(".").reduce(function(e,t){return e&&e[t]},e)}function H(){for(var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length,n=new Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];if(!n.length)return t;var a=n.shift();return A.object(a)?(Object.keys(a).forEach(function(e){A.object(a[e])?(Object.keys(t).includes(e)||Object.assign(t,o({},e,{})),H(t[e],a[e])):Object.assign(t,o({},e,a[e]))}),H.apply(void 0,[t].concat(n))):t}function q(e,a){e=e.length?e:[e];Array.from(e).reverse().forEach(function(e,t){var n=0<t?a.cloneNode(!0):a,i=e.parentNode,t=e.nextSibling;n.appendChild(e),t?i.insertBefore(n,t):i.appendChild(n)})}function j(n,e){A.element(n)&&!A.empty(e)&&Object.entries(e).filter(function(e){e=d(e,2)[1];return!A.nullOrUndefined(e)}).forEach(function(e){var t=d(e,2),e=t[0],t=t[1];return n.setAttribute(e,t)})}function U(e,t,n){e=document.createElement(e);return A.object(t)&&j(e,t),A.string(n)&&(e.innerText=n),e}function V(e,t,n,i){A.element(t)&&t.appendChild(U(e,n,i))}function z(e){A.nodeList(e)||A.array(e)?Array.from(e).forEach(z):A.element(e)&&A.element(e.parentNode)&&e.parentNode.removeChild(e)}function B(e){if(A.element(e))for(var t=e.childNodes.length;0<t;)e.removeChild(e.lastChild),--t}function W(e,t){return A.element(t)&&A.element(t.parentNode)&&A.element(e)?(t.parentNode.replaceChild(e,t),e):null}function Z(e,t){if(!A.string(e)||A.empty(e))return{};var o={},s=H({},t);return e.split(",").forEach(function(e){var t=e.trim(),n=t.replace(".",""),e=t.replace(/[[\]]/g,"").split("="),i=d(e,1)[0],a=1<e.length?e[1].replace(/["']/g,""):"";switch(t.charAt(0)){case".":A.string(s.class)?o.class="".concat(s.class," ").concat(n):o.class=n;break;case"#":o.id=t.replace("#","");break;case"[":o[i]=a}}),H(s,o)}function K(e,t){A.element(e)&&(t=t,A.boolean(t)||(t=!e.hidden),e.hidden=t)}function Y(e,t,n){if(A.nodeList(e))return Array.from(e).map(function(e){return Y(e,t,n)});if(A.element(e)){var i=void 0!==n?n?"add":"remove":"toggle";return e.classList[i](t),e.classList.contains(t)}return!1}function G(e,t){return A.element(e)&&e.classList.contains(t)}function X(e,t){return function(){return Array.from(document.querySelectorAll(t)).includes(this)}.call(e,t)}function Q(e){return this.elements.container.querySelectorAll(e)}function $(e){return this.elements.container.querySelector(e)}function J(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];A.element(e)&&(e.focus({preventScroll:!0}),t&&Y(e,this.config.classNames.tabFocus))}var ee={"audio/ogg":"vorbis","audio/wav":"1","video/webm":"vp8, vorbis","video/mp4":"avc1.42E01E, mp4a.40.2","video/ogg":"theora"},te={audio:"canPlayType"in document.createElement("audio"),video:"canPlayType"in document.createElement("video"),check:function(e,t,n){n=P.isIPhone&&n&&te.playsinline,t=te[e]||"html5"!==t;return{api:t,ui:t&&te.rangeInput&&("video"!==e||!P.isIPhone||n)}},pip:!(P.isIPhone||!A.function(U("video").webkitSetPresentationMode)&&(!document.pictureInPictureEnabled||U("video").disablePictureInPicture)),airplay:A.function(window.WebKitPlaybackTargetAvailabilityEvent),playsinline:"playsInline"in document.createElement("video"),mime:function(e){if(A.empty(e))return!1;var t=d(e.split("/"),1)[0],n=e;if(!this.isHTML5||t!==this.type)return!1;Object.keys(ee).includes(n)&&(n+='; codecs="'.concat(ee[e],'"'));try{return Boolean(n&&this.media.canPlayType(n).replace(/no/,""))}catch(e){return!1}},textTracks:"textTracks"in document.createElement("video"),rangeInput:((Je=document.createElement("input")).type="range")===Je.type,touch:"ontouchstart"in document.documentElement,transitions:!1!==S,reducedMotion:"matchMedia"in window&&window.matchMedia("(prefers-reduced-motion)").matches};function ne(e){return(A.array(e)||A.string(e)&&e.includes(":"))&&(A.array(e)?e:e.split(":")).map(Number).every(A.number)}function ie(e){if(!A.array(e)||!e.every(A.number))return null;var t=d(e,2),n=t[0],e=t[1],t=function e(t,n){return 0===n?t:e(n,t%n)}(n,e);return[n/t,e/t]}function ae(e){var t=function(e){return ne(e)?e.split(":").map(Number):null},e=t(e);return null===e&&(e=t(this.config.ratio)),null===e&&!A.empty(this.embed)&&A.array(this.embed.ratio)&&(e=this.embed.ratio),null===e&&this.isHTML5&&(e=ie([(t=this.media).videoWidth,t.videoHeight])),e}function oe(e){if(!this.isVideo)return{};var t=ae.call(this,e),n=d(A.array(t)?t:[0,0],2),e=100/n[0]*n[1];return this.elements.wrapper.style.paddingBottom="".concat(e,"%"),this.isVimeo&&this.supported.ui?(n=(240-e)/4.8,this.media.style.transform="translateY(-".concat(n,"%)")):this.isHTML5&&this.elements.wrapper.classList.toggle(this.config.classNames.videoFixedRatio,null!==t),{padding:e,ratio:t}}var se={getSources:function(){var t=this;return this.isHTML5?Array.from(this.media.querySelectorAll("source")).filter(function(e){e=e.getAttribute("type");return!!A.empty(e)||te.mime.call(t,e)}):[]},getQualityOptions:function(){return se.getSources.call(this).map(function(e){return Number(e.getAttribute("size"))}).filter(Boolean)},extend:function(){var s;this.isHTML5&&(s=this,A.empty(this.config.ratio)||oe.call(s),Object.defineProperty(s.media,"quality",{get:function(){var e=se.getSources.call(s).find(function(e){return e.getAttribute("src")===s.source});return e&&Number(e.getAttribute("size"))},set:function(t){var e,n,i,a,o=se.getSources.call(s).find(function(e){return Number(e.getAttribute("size"))===t});o&&(a=s.media,e=a.currentTime,n=a.paused,i=a.preload,a=a.readyState,s.media.src=o.getAttribute("src"),"none"===i&&!a||(s.once("loadedmetadata",function(){s.currentTime=e,n||s.play()}),s.media.load()),F.call(s,s.media,"qualitychange",!1,{quality:t}))}}))},cancelRequests:function(){this.isHTML5&&(z(se.getSources.call(this)),this.media.setAttribute("src",this.config.blankVideo),this.media.load(),this.debug.log("Cancelled network requests"))}};function re(n){return A.array(n)?n.filter(function(e,t){return n.indexOf(e)===t}):n}function le(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return A.empty(e)?e:e.toString().replace(/{(\d+)}/g,function(e,t){return n[t].toString()})}function ce(e,t,n){e=0<arguments.length&&void 0!==e?e:"",t=1<arguments.length&&void 0!==t?t:"",n=2<arguments.length&&void 0!==n?n:"";return e.replace(new RegExp(t.toString().replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1"),"g"),n.toString())}function ue(e){return(0<arguments.length&&void 0!==e?e:"").toString().replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}function de(e){var t=document.createElement("div");return t.appendChild(e),t.innerHTML}function he(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(A.empty(e)||A.empty(t))return"";var n=R(t.i18n,e);return A.empty(n)?Object.keys(me).includes(e)?me[e]:"":(t={"{seektime}":t.seekTime,"{title}":t.title},Object.entries(t).forEach(function(e){var t=d(e,2),e=t[0],t=t[1];n=ce(n,e,t)}),n)}var me={pip:"PIP",airplay:"AirPlay",html5:"HTML5",vimeo:"Vimeo",youtube:"YouTube"},pe=(e(fe,[{key:"get",value:function(e){if(!fe.supported||!this.enabled)return null;var t=window.localStorage.getItem(this.key);if(A.empty(t))return null;t=JSON.parse(t);return A.string(e)&&e.length?t[e]:t}},{key:"set",value:function(e){var t;fe.supported&&this.enabled&&A.object(e)&&(t=this.get(),A.empty(t)&&(t={}),H(t,e),window.localStorage.setItem(this.key,JSON.stringify(t)))}}],[{key:"supported",get:function(){try{return"localStorage"in window?(window.localStorage.setItem("___test","___test"),window.localStorage.removeItem("___test"),!0):!1}catch(e){return!1}}}]),fe);function fe(e){r(this,fe),this.enabled=e.config.storage.enabled,this.key=e.config.storage.key}function ge(e,t){var a=1<arguments.length&&void 0!==t?t:"text";return new Promise(function(t,n){try{var i=new XMLHttpRequest;if(!("withCredentials"in i))return;i.addEventListener("load",function(){if("text"===a)try{t(JSON.parse(i.responseText))}catch(e){t(i.responseText)}else t(i.response)}),i.addEventListener("error",function(){throw new Error(i.status)}),i.open("GET",e,!0),i.responseType=a,i.send()}catch(e){n(e)}})}function ye(e,t){var n,i,a,o,s,r;A.string(e)&&(n=A.string(t),i=function(){return null!==document.getElementById(t)},a=function(e,t){e.innerHTML=t,n&&i()||document.body.insertAdjacentElement("afterbegin",e)},n&&i()||(o=pe.supported,(s=document.createElement("div")).setAttribute("hidden",""),n&&s.setAttribute("id",t),o&&null!==(r=window.localStorage.getItem("".concat("cache","-").concat(t)))&&(r=JSON.parse(r),a(s,r.content)),ge(e).then(function(e){A.empty(e)||(o&&window.localStorage.setItem("".concat("cache","-").concat(t),JSON.stringify({content:e})),a(s,e))}).catch(function(){})))}var ve=function(e){return Math.trunc(e/60/60%60,10)},be=function(e){return Math.trunc(e/60%60,10)},we=function(e){return Math.trunc(e%60,10)};function ke(e,t,n){var i=0<arguments.length&&void 0!==e?e:0,a=1<arguments.length&&void 0!==t&&t,o=2<arguments.length&&void 0!==n&&n;if(!A.number(i))return ke(null,a,o);function s(e){return"0".concat(e).slice(-2)}e=ve(i),t=be(i),n=we(i),e=a||0<e?"".concat(e,":"):"";return"".concat(o&&0<i?"-":"").concat(e).concat(s(t),":").concat(s(n))}var Te={getIconUrl:function(){var e=new URL(this.config.iconUrl,window.location).host!==window.location.host||P.isIE&&!window.svg4everybody;return{url:this.config.iconUrl,cors:e}},findElements:function(){try{return this.elements.controls=$.call(this,this.config.selectors.controls.wrapper),this.elements.buttons={play:Q.call(this,this.config.selectors.buttons.play),pause:$.call(this,this.config.selectors.buttons.pause),restart:$.call(this,this.config.selectors.buttons.restart),rewind:$.call(this,this.config.selectors.buttons.rewind),fastForward:$.call(this,this.config.selectors.buttons.fastForward),mute:$.call(this,this.config.selectors.buttons.mute),pip:$.call(this,this.config.selectors.buttons.pip),airplay:$.call(this,this.config.selectors.buttons.airplay),settings:$.call(this,this.config.selectors.buttons.settings),captions:$.call(this,this.config.selectors.buttons.captions),fullscreen:$.call(this,this.config.selectors.buttons.fullscreen)},this.elements.progress=$.call(this,this.config.selectors.progress),this.elements.inputs={seek:$.call(this,this.config.selectors.inputs.seek),volume:$.call(this,this.config.selectors.inputs.volume)},this.elements.display={buffer:$.call(this,this.config.selectors.display.buffer),currentTime:$.call(this,this.config.selectors.display.currentTime),duration:$.call(this,this.config.selectors.display.duration)},A.element(this.elements.progress)&&(this.elements.display.seekTooltip=this.elements.progress.querySelector(".".concat(this.config.classNames.tooltip))),!0}catch(e){return this.debug.warn("It looks like there is a problem with your custom controls HTML",e),this.toggleNativeControls(!0),!1}},createIcon:function(e,t){var n=Te.getIconUrl.call(this),i="".concat(n.cors?"":n.url,"#").concat(this.config.iconPrefix),n=document.createElementNS("http://www.w3.org/2000/svg","svg");j(n,H(t,{role:"presentation",focusable:"false"}));t=document.createElementNS("http://www.w3.org/2000/svg","use"),e="".concat(i,"-").concat(e);return"href"in t&&t.setAttributeNS("http://www.w3.org/1999/xlink","href",e),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e),n.appendChild(t),n},createLabel:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=he(e,this.config);return U("span",Object.assign({},t,{class:[t.class,this.config.classNames.hidden].filter(Boolean).join(" ")}),e)},createBadge:function(e){if(A.empty(e))return null;var t=U("span",{class:this.config.classNames.menu.value});return t.appendChild(U("span",{class:this.config.classNames.menu.badge},e)),t},createButton:function(e,t){var n=this,i=H({},t),a=function(e){return(e=function(e){e=ce(e=(0<arguments.length&&void 0!==e?e:"").toString(),"-"," ");return e=ce(e,"_"," "),ce(e=ue(e)," ","")}(e=(0<arguments.length&&void 0!==e?e:"").toString())).charAt(0).toLowerCase()+e.slice(1)}(e),o={element:"button",toggle:!1,label:null,icon:null,labelPressed:null,iconPressed:null};switch(["element","icon","label"].forEach(function(e){Object.keys(i).includes(e)&&(o[e]=i[e],delete i[e])}),"button"!==o.element||Object.keys(i).includes("type")||(i.type="button"),Object.keys(i).includes("class")?i.class.split(" ").some(function(e){return e===n.config.classNames.control})||H(i,{class:"".concat(i.class," ").concat(this.config.classNames.control)}):i.class=this.config.classNames.control,e){case"play":o.toggle=!0,o.label="play",o.labelPressed="pause",o.icon="play",o.iconPressed="pause";break;case"mute":o.toggle=!0,o.label="mute",o.labelPressed="unmute",o.icon="volume",o.iconPressed="muted";break;case"captions":o.toggle=!0,o.label="enableCaptions",o.labelPressed="disableCaptions",o.icon="captions-off",o.iconPressed="captions-on";break;case"fullscreen":o.toggle=!0,o.label="enterFullscreen",o.labelPressed="exitFullscreen",o.icon="enter-fullscreen",o.iconPressed="exit-fullscreen";break;case"play-large":i.class+=" ".concat(this.config.classNames.control,"--overlaid"),a="play",o.label="play",o.icon="play";break;default:A.empty(o.label)&&(o.label=a),A.empty(o.icon)&&(o.icon=e)}t=U(o.element);return o.toggle?(t.appendChild(Te.createIcon.call(this,o.iconPressed,{class:"icon--pressed"})),t.appendChild(Te.createIcon.call(this,o.icon,{class:"icon--not-pressed"})),t.appendChild(Te.createLabel.call(this,o.labelPressed,{class:"label--pressed"})),t.appendChild(Te.createLabel.call(this,o.label,{class:"label--not-pressed"}))):(t.appendChild(Te.createIcon.call(this,o.icon)),t.appendChild(Te.createLabel.call(this,o.label))),H(i,Z(this.config.selectors.buttons[a],i)),j(t,i),"play"===a?(A.array(this.elements.buttons[a])||(this.elements.buttons[a]=[]),this.elements.buttons[a].push(t)):this.elements.buttons[a]=t,t},createRange:function(e,t){t=U("input",H(Z(this.config.selectors.inputs[e]),{type:"range",min:0,max:100,step:.01,value:0,autocomplete:"off",role:"slider","aria-label":he(e,this.config),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":0},t));return this.elements.inputs[e]=t,Te.updateRangeFill.call(this,t),E.setup(t),t},createProgress:function(e,t){var n=U("progress",H(Z(this.config.selectors.display[e]),{min:0,max:100,value:0,role:"progressbar","aria-hidden":!0},t));return"volume"!==e&&(n.appendChild(U("span",null,"0")),t=(t={played:"played",buffer:"buffered"}[e])?he(t,this.config):"",n.innerText="% ".concat(t.toLowerCase())),this.elements.display[e]=n},createTime:function(e,t){t=Z(this.config.selectors.display[e],t),t=U("div",H(t,{class:"".concat(t.class||""," ").concat(this.config.classNames.display.time," ").trim(),"aria-label":he(e,this.config)}),"00:00");return this.elements.display[e]=t},bindMenuItemShortcuts:function(i,a){var o=this;N(i,"keydown keyup",function(e){var t,n;[32,38,39,40].includes(e.which)&&(e.preventDefault(),e.stopPropagation(),"keydown"!==e.type)&&(!(n=X(i,'[role="menuitemradio"]'))&&[32,39].includes(e.which)?Te.showMenuPanel.call(o,a,!0):32!==e.which&&(40===e.which||n&&39===e.which?(t=i.nextElementSibling,A.element(t)||(t=i.parentNode.firstElementChild)):(t=i.previousElementSibling,A.element(t)||(t=i.parentNode.lastElementChild)),J.call(o,t,!0)))},!1),N(i,"keyup",function(e){13===e.which&&Te.focusFirstMenuItem.call(o,null,!0)})},createMenuItem:function(e){var t=this,n=e.value,i=e.list,a=e.type,o=e.title,s=e.badge,r=void 0===s?null:s,s=e.checked,e=void 0!==s&&s,s=Z(this.config.selectors.inputs[a]),l=U("button",H(s,{type:"button",role:"menuitemradio",class:"".concat(this.config.classNames.control," ").concat(s.class||"").trim(),"aria-checked":e,value:n})),e=U("span");e.innerHTML=o,A.element(r)&&e.appendChild(r),l.appendChild(e),Object.defineProperty(l,"checked",{enumerable:!0,get:function(){return"true"===l.getAttribute("aria-checked")},set:function(e){e&&Array.from(l.parentNode.children).filter(function(e){return X(e,'[role="menuitemradio"]')}).forEach(function(e){return e.setAttribute("aria-checked","false")}),l.setAttribute("aria-checked",e?"true":"false")}}),this.listeners.bind(l,"click keyup",function(e){if(!A.keyboardEvent(e)||32===e.which){switch(e.preventDefault(),e.stopPropagation(),l.checked=!0,a){case"language":t.currentTrack=Number(n);break;case"quality":t.quality=n;break;case"speed":t.speed=parseFloat(n)}Te.showMenuPanel.call(t,"home",A.keyboardEvent(e))}},a,!1),Te.bindMenuItemShortcuts.call(this,l,a),i.appendChild(l)},formatTime:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return A.number(e)?ke(e,0<ve(this.duration),t):e},updateTimeDisplay:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];A.element(e)&&A.number(t)&&(e.innerText=Te.formatTime(t,n))},updateVolume:function(){this.supported.ui&&(A.element(this.elements.inputs.volume)&&Te.setRange.call(this,this.elements.inputs.volume,this.muted?0:this.volume),A.element(this.elements.buttons.mute)&&(this.elements.buttons.mute.pressed=this.muted||0===this.volume))},setRange:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;A.element(e)&&(e.value=t,Te.updateRangeFill.call(this,e))},updateProgress:function(e){var t=this;if(this.supported.ui&&A.event(e)){var n,i,a;if(e)switch(e.type){case"timeupdate":case"seeking":case"seeked":n=this.currentTime,i=this.duration,a=0===n||0===i||Number.isNaN(n)||Number.isNaN(i)?0:(n/i*100).toFixed(2),"timeupdate"===e.type&&Te.setRange.call(this,this.elements.inputs.seek,a);break;case"playing":case"progress":n=this.elements.display.buffer,i=100*this.buffered,i=A.number(i)?i:0,n=A.element(n)?n:t.elements.display.buffer,!void(A.element(n)&&(n.value=i,n=n.getElementsByTagName("span")[0],A.element(n)&&(n.childNodes[0].nodeValue=i)))}}},updateRangeFill:function(e){var t,n,i=A.event(e)?e.target:e;A.element(i)&&"range"===i.getAttribute("type")&&(X(i,this.config.selectors.inputs.seek)?(i.setAttribute("aria-valuenow",this.currentTime),t=Te.formatTime(this.currentTime),n=Te.formatTime(this.duration),e=he("seekLabel",this.config),i.setAttribute("aria-valuetext",e.replace("{currentTime}",t).replace("{duration}",n))):X(i,this.config.selectors.inputs.volume)?(n=100*i.value,i.setAttribute("aria-valuenow",n),i.setAttribute("aria-valuetext","".concat(n.toFixed(1),"%"))):i.setAttribute("aria-valuenow",i.value),P.isWebkit&&i.style.setProperty("--value","".concat(i.value/i.max*100,"%")))},updateSeekTooltip:function(e){var t=this;if(this.config.tooltips.seek&&A.element(this.elements.inputs.seek)&&A.element(this.elements.display.seekTooltip)&&0!==this.duration){var n="".concat(this.config.classNames.tooltip,"--visible"),i=function(e){return Y(t.elements.display.seekTooltip,n,e)};if(this.touch)i(!1);else{var a=0,o=this.elements.progress.getBoundingClientRect();if(A.event(e))a=100/o.width*(e.pageX-o.left);else{if(!G(this.elements.display.seekTooltip,n))return;a=parseFloat(this.elements.display.seekTooltip.style.left,10)}a<0?a=0:100<a&&(a=100),Te.updateTimeDisplay.call(this,this.elements.display.seekTooltip,this.duration/100*a),this.elements.display.seekTooltip.style.left="".concat(a,"%"),A.event(e)&&["mouseenter","mouseleave"].includes(e.type)&&i("mouseenter"===e.type)}}},timeUpdate:function(e){var t=!A.element(this.elements.display.duration)&&this.config.invertTime;Te.updateTimeDisplay.call(this,this.elements.display.currentTime,t?this.duration-this.currentTime:this.currentTime,t),e&&"timeupdate"===e.type&&this.media.seeking||Te.updateProgress.call(this,e)},durationUpdate:function(){if(this.supported.ui&&(this.config.invertTime||!this.currentTime)){if(this.duration>=Math.pow(2,32))return K(this.elements.display.currentTime,!0),void K(this.elements.progress,!0);A.element(this.elements.inputs.seek)&&this.elements.inputs.seek.setAttribute("aria-valuemax",this.duration);var e=A.element(this.elements.display.duration);!e&&this.config.displayDuration&&this.paused&&Te.updateTimeDisplay.call(this,this.elements.display.currentTime,this.duration),e&&Te.updateTimeDisplay.call(this,this.elements.display.duration,this.duration),Te.updateSeekTooltip.call(this)}},toggleMenuButton:function(e,t){K(this.elements.settings.buttons[e],!t)},updateSetting:function(e,t,n){var i=this.elements.settings.panels[e],a=null,t=t;if("captions"===e)a=this.currentTrack;else{if(a=A.empty(n)?this[e]:n,A.empty(a)&&(a=this.config[e].default),!A.empty(this.options[e])&&!this.options[e].includes(a))return void this.debug.warn("Unsupported value of '".concat(a,"' for ").concat(e));if(!this.config[e].options.includes(a))return void this.debug.warn("Disabled value of '".concat(a,"' for ").concat(e))}A.element(t)||(t=i&&i.querySelector('[role="menu"]')),A.element(t)&&(this.elements.settings.buttons[e].querySelector(".".concat(this.config.classNames.menu.value)).innerHTML=Te.getLabel.call(this,e,a),a=t&&t.querySelector('[value="'.concat(a,'"]')),A.element(a)&&(a.checked=!0))},getLabel:function(e,t){switch(e){case"speed":return 1===t?he("normal",this.config):"".concat(t,"&times;");case"quality":if(A.number(t)){var n=he("qualityLabel.".concat(t),this.config);return n.length?n:"".concat(t,"p")}return ue(t);case"captions":return Ae.getLabel.call(this);default:return null}},setQualityMenu:function(e){var t,i=this;A.element(this.elements.settings.panels.quality)&&(t=this.elements.settings.panels.quality.querySelector('[role="menu"]'),A.array(e)&&(this.options.quality=re(e).filter(function(e){return i.config.quality.options.includes(e)})),e=!A.empty(this.options.quality)&&1<this.options.quality.length,Te.toggleMenuButton.call(this,"quality",e),B(t),Te.checkMenu.call(this),e&&(this.options.quality.sort(function(e,t){var n=i.config.quality.options;return n.indexOf(e)>n.indexOf(t)?1:-1}).forEach(function(e){Te.createMenuItem.call(i,{value:e,list:t,type:"quality",title:Te.getLabel.call(i,"quality",e),badge:function(e){e=he("qualityBadge.".concat(e),i.config);return e.length?Te.createBadge.call(i,e):null}(e)})}),Te.updateSetting.call(this,"quality",t)))},setCaptionsMenu:function(){var n,e,t,i=this;A.element(this.elements.settings.panels.captions)&&(n=this.elements.settings.panels.captions.querySelector('[role="menu"]'),t=Ae.getTracks.call(this),e=Boolean(t.length),Te.toggleMenuButton.call(this,"captions",e),B(n),Te.checkMenu.call(this),e&&((t=t.map(function(e,t){return{value:t,checked:i.captions.toggled&&i.currentTrack===t,title:Ae.getLabel.call(i,e),badge:e.language&&Te.createBadge.call(i,e.language.toUpperCase()),list:n,type:"language"}})).unshift({value:-1,checked:!this.captions.toggled,title:he("disabled",this.config),list:n,type:"language"}),t.forEach(Te.createMenuItem.bind(this)),Te.updateSetting.call(this,"captions",n)))},setSpeedMenu:function(e){var t,n=this;A.element(this.elements.settings.panels.speed)&&(t=this.elements.settings.panels.speed.querySelector('[role="menu"]'),A.array(e)?this.options.speed=e:(this.isHTML5||this.isVimeo)&&(this.options.speed=[.5,.75,1,1.25,1.5,1.75,2]),this.options.speed=this.options.speed.filter(function(e){return n.config.speed.options.includes(e)}),e=!A.empty(this.options.speed)&&1<this.options.speed.length,Te.toggleMenuButton.call(this,"speed",e),B(t),Te.checkMenu.call(this),e&&(this.options.speed.forEach(function(e){Te.createMenuItem.call(n,{value:e,list:t,type:"speed",title:Te.getLabel.call(n,"speed",e)})}),Te.updateSetting.call(this,"speed",t)))},checkMenu:function(){var e=this.elements.settings.buttons,e=!A.empty(e)&&Object.values(e).some(function(e){return!e.hidden});K(this.elements.settings.menu,!e)},focusFirstMenuItem:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];this.elements.settings.popup.hidden||(e=e,A.element(e)||(e=Object.values(this.elements.settings.panels).find(function(e){return!e.hidden})),e=e.querySelector('[role^="menuitem"]'),J.call(this,e,t))},toggleMenu:function(e){var t=this.elements.settings.popup,n=this.elements.buttons.settings;if(A.element(t)&&A.element(n)){var i=t.hidden,a=i;if(A.boolean(e))a=e;else if(A.keyboardEvent(e)&&27===e.which)a=!1;else if(A.event(e)){var o=A.function(e.composedPath)?e.composedPath()[0]:e.target,o=t.contains(o);if(o||!o&&e.target!==n&&a)return}n.setAttribute("aria-expanded",a),K(t,!a),Y(this.elements.container,this.config.classNames.menu.open,a),a&&A.keyboardEvent(e)?Te.focusFirstMenuItem.call(this,null,!0):a||i||J.call(this,n,A.keyboardEvent(e))}},getMenuSize:function(e){var t=e.cloneNode(!0);t.style.position="absolute",t.style.opacity=0,t.removeAttribute("hidden"),e.parentNode.appendChild(t);var n=t.scrollWidth,e=t.scrollHeight;return z(t),{width:n,height:e}},showMenuPanel:function(){var n,e,i=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",a=1<arguments.length&&void 0!==arguments[1]&&arguments[1],o=this.elements.container.querySelector("#plyr-settings-".concat(this.id,"-").concat(t));A.element(o)&&(n=o.parentNode,e=Array.from(n.children).find(function(e){return!e.hidden}),te.transitions&&!te.reducedMotion&&(n.style.width="".concat(e.scrollWidth,"px"),n.style.height="".concat(e.scrollHeight,"px"),t=Te.getMenuSize.call(this,o),N.call(this,n,S,function e(t){t.target===n&&["width","height"].includes(t.propertyName)&&(n.style.width="",n.style.height="",D.call(i,n,S,e))}),n.style.width="".concat(t.width,"px"),n.style.height="".concat(t.height,"px")),K(e,!0),K(o,!1),Te.focusFirstMenuItem.call(this,o,a))},setDownloadUrl:function(){var e=this.elements.buttons.download;A.element(e)&&e.setAttribute("href",this.download)},create:function(c){var u=this,d=Te.bindMenuItemShortcuts,h=Te.createButton,m=Te.createProgress,p=Te.createRange,f=Te.createTime,e=Te.setQualityMenu,t=Te.setSpeedMenu,g=Te.showMenuPanel;this.elements.controls=null,this.config.controls.includes("play-large")&&this.elements.container.appendChild(h.call(this,"play-large"));var y=U("div",Z(this.config.selectors.controls.wrapper));this.elements.controls=y;var v={class:"plyr__controls__item"};return re(this.config.controls).forEach(function(e){var t,n,i,a,o,s,r,l;"restart"===e&&y.appendChild(h.call(u,"restart",v)),"rewind"===e&&y.appendChild(h.call(u,"rewind",v)),"play"===e&&y.appendChild(h.call(u,"play",v)),"fast-forward"===e&&y.appendChild(h.call(u,"fast-forward",v)),"progress"===e&&(i=U("div",{class:"".concat(v.class," plyr__progress__container")}),(t=U("div",Z(u.config.selectors.progress))).appendChild(p.call(u,"seek",{id:"plyr-seek-".concat(c.id)})),t.appendChild(m.call(u,"buffer")),u.config.tooltips.seek&&(n=U("span",{class:u.config.classNames.tooltip},"00:00"),t.appendChild(n),u.elements.display.seekTooltip=n),u.elements.progress=t,i.appendChild(u.elements.progress),y.appendChild(i)),"current-time"===e&&y.appendChild(f.call(u,"currentTime",v)),"duration"===e&&y.appendChild(f.call(u,"duration",v)),"mute"!==e&&"volume"!==e||(i=u.elements.volume,A.element(i)&&y.contains(i)||(i=U("div",H({},v,{class:"".concat(v.class," plyr__volume").trim()})),u.elements.volume=i,y.appendChild(i)),"mute"===e&&i.appendChild(h.call(u,"mute")),"volume"===e&&(o={max:1,step:.05,value:u.config.volume},i.appendChild(p.call(u,"volume",H(o,{id:"plyr-volume-".concat(c.id)}))))),"captions"===e&&y.appendChild(h.call(u,"captions",v)),"settings"!==e||A.empty(u.config.settings)||((l=U("div",H({},v,{class:"".concat(v.class," plyr__menu").trim(),hidden:""}))).appendChild(h.call(u,"settings",{"aria-haspopup":!0,"aria-controls":"plyr-settings-".concat(c.id),"aria-expanded":!1})),r=U("div",{class:"plyr__menu__container",id:"plyr-settings-".concat(c.id),hidden:""}),a=U("div"),o=U("div",{id:"plyr-settings-".concat(c.id,"-home")}),s=U("div",{role:"menu"}),o.appendChild(s),a.appendChild(o),u.elements.settings.panels.home=o,u.config.settings.forEach(function(e){var t=U("button",H(Z(u.config.selectors.buttons.settings),{type:"button",class:"".concat(u.config.classNames.control," ").concat(u.config.classNames.control,"--forward"),role:"menuitem","aria-haspopup":!0,hidden:""}));d.call(u,t,e),N(t,"click",function(){g.call(u,e,!1)});var n=U("span",null,he(e,u.config)),i=U("span",{class:u.config.classNames.menu.value});i.innerHTML=c[e],n.appendChild(i),t.appendChild(n),s.appendChild(t);i=U("div",{id:"plyr-settings-".concat(c.id,"-").concat(e),hidden:""}),n=U("button",{type:"button",class:"".concat(u.config.classNames.control," ").concat(u.config.classNames.control,"--back")});n.appendChild(U("span",{"aria-hidden":!0},he(e,u.config))),n.appendChild(U("span",{class:u.config.classNames.hidden},he("menuBack",u.config))),N(i,"keydown",function(e){37===e.which&&(e.preventDefault(),e.stopPropagation(),g.call(u,"home",!0))},!1),N(n,"click",function(){g.call(u,"home",!1)}),i.appendChild(n),i.appendChild(U("div",{role:"menu"})),a.appendChild(i),u.elements.settings.buttons[e]=t,u.elements.settings.panels[e]=i}),r.appendChild(a),l.appendChild(r),y.appendChild(l),u.elements.settings.popup=r,u.elements.settings.menu=l),"pip"===e&&te.pip&&y.appendChild(h.call(u,"pip",v)),"airplay"===e&&te.airplay&&y.appendChild(h.call(u,"airplay",v)),"download"===e&&(r=H({},v,{element:"a",href:u.download,target:"_blank"}),l=u.config.urls.download,!A.url(l)&&u.isEmbed&&H(r,{icon:"logo-".concat(u.provider),label:u.provider}),y.appendChild(h.call(u,"download",r))),"fullscreen"===e&&y.appendChild(h.call(u,"fullscreen",v))}),this.isHTML5&&e.call(this,se.getQualityOptions.call(this)),t.call(this),y},inject:function(){var n=this;!this.config.loadSprite||(s=Te.getIconUrl.call(this)).cors&&ye(s.url,"sprite-plyr"),this.id=Math.floor(1e4*Math.random());var e=null;this.elements.controls=null;var t={id:this.id,seektime:this.config.seekTime,title:this.config.title},i=!0;A.function(this.config.controls)&&(this.config.controls=this.config.controls.call(this,t)),this.config.controls||(this.config.controls=[]),A.element(this.config.controls)||A.string(this.config.controls)?e=this.config.controls:(e=Te.create.call(this,{id:this.id,seektime:this.config.seekTime,speed:this.speed,quality:this.quality,captions:Ae.getLabel.call(this)}),i=!1);var a,o,s=function(e){var n=e;return Object.entries(t).forEach(function(e){var t=d(e,2),e=t[0],t=t[1];n=ce(n,"{".concat(e,"}"),t)}),n};i&&(A.string(this.config.controls)?e=s(e):A.element(e)&&(e.innerHTML=s(e.innerHTML))),A.string(this.config.selectors.controls.container)&&(o=document.querySelector(this.config.selectors.controls.container)),A.element(o)||(o=this.elements.container),o[A.element(e)?"insertAdjacentElement":"insertAdjacentHTML"]("afterbegin",e),A.element(this.elements.controls)||Te.findElements.call(this),A.empty(this.elements.buttons)||(a=function(e){var t=n.config.classNames.controlPressed;Object.defineProperty(e,"pressed",{enumerable:!0,get:function(){return G(e,t)},set:function(){Y(e,t,0<arguments.length&&void 0!==arguments[0]&&arguments[0])}})},Object.values(this.elements.buttons).filter(Boolean).forEach(function(e){A.array(e)||A.nodeList(e)?Array.from(e).filter(Boolean).forEach(a):a(e)})),P.isEdge&&M(o),this.config.tooltips.controls&&(o=(e=this.config).classNames,e=e.selectors,o="".concat(e.controls.wrapper," ").concat(e.labels," .").concat(o.hidden),o=Q.call(this,o),Array.from(o).forEach(function(e){Y(e,n.config.classNames.hidden,!1),Y(e,n.config.classNames.tooltip,!0)}))}};function xe(e,t){var n=e;1<arguments.length&&void 0!==t&&!t||((t=document.createElement("a")).href=n,n=t.href);try{return new URL(n)}catch(e){return null}}function Ce(e){var n=new URLSearchParams;return A.object(e)&&Object.entries(e).forEach(function(e){var t=d(e,2),e=t[0],t=t[1];n.set(e,t)}),n}function Ee(){}var Ae={setup:function(){var e,t,n;this.supported.ui&&(!this.isVideo||this.isYouTube||this.isHTML5&&!te.textTracks?A.array(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&Te.setCaptionsMenu.call(this):(A.element(this.elements.captions)||(this.elements.captions=U("div",Z(this.config.selectors.captions)),t=this.elements.captions,n=this.elements.wrapper,A.element(t)&&A.element(n)&&n.parentNode.insertBefore(t,n.nextSibling)),P.isIE&&window.URL&&(e=this.media.querySelectorAll("track"),Array.from(e).forEach(function(t){var e=t.getAttribute("src"),n=xe(e);null!==n&&n.hostname!==window.location.href.hostname&&["http:","https:"].includes(n.protocol)&&ge(e,"blob").then(function(e){t.setAttribute("src",window.URL.createObjectURL(e))}).catch(function(){z(t)})})),t=re((navigator.languages||[navigator.language||navigator.userLanguage||"en"]).map(function(e){return e.split("-")[0]})),"auto"===(n=(this.storage.get("language")||this.config.captions.language||"auto").toLowerCase())&&(n=d(t,1)[0]),e=this.storage.get("captions"),A.boolean(e)||(e=this.config.captions.active),Object.assign(this.captions,{toggled:!1,active:e,language:n,languages:t}),this.isHTML5&&(t=this.config.captions.update?"addtrack removetrack":"removetrack",N.call(this,this.media.textTracks,t,Ae.update.bind(this))),setTimeout(Ae.update.bind(this),0)))},update:function(){var t=this,e=Ae.getTracks.call(this,!0),n=this.captions,i=n.active,a=n.language,o=n.meta,s=n.currentTrackNode,n=Boolean(e.find(function(e){return e.language===a}));this.isHTML5&&this.isVideo&&e.filter(function(e){return!o.get(e)}).forEach(function(e){t.debug.log("Track added",e),o.set(e,{default:"showing"===e.mode}),e.mode="hidden",N.call(t,e,"cuechange",function(){return Ae.updateCues.call(t)})}),(n&&this.language!==a||!e.includes(s))&&(Ae.setLanguage.call(this,a),Ae.toggle.call(this,i&&n)),Y(this.elements.container,this.config.classNames.captions.enabled,!A.empty(e)),(this.config.controls||[]).includes("settings")&&this.config.settings.includes("captions")&&Te.setCaptionsMenu.call(this)},toggle:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(this.supported.ui){var n=this.captions.toggled,i=this.config.classNames.captions.active,e=A.nullOrUndefined(e)?!n:e;if(e!==n){if(t||(this.captions.active=e,this.storage.set({captions:e})),!this.language&&e&&!t){n=Ae.getTracks.call(this),t=Ae.findTrack.call(this,[this.captions.language].concat(a(this.captions.languages)),!0);return this.captions.language=t.language,void Ae.set.call(this,n.indexOf(t))}this.elements.buttons.captions&&(this.elements.buttons.captions.pressed=e),Y(this.elements.container,i,e),this.captions.toggled=e,Te.updateSetting.call(this,"captions"),F.call(this,this.media,e?"captionsenabled":"captionsdisabled")}}},set:function(e){var t,n=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],i=Ae.getTracks.call(this);-1!==e?A.number(e)?e in i?(this.captions.currentTrack!==e&&(i=((t=i[this.captions.currentTrack=e])||{}).language,this.captions.currentTrackNode=t,Te.updateSetting.call(this,"captions"),n||(this.captions.language=i,this.storage.set({language:i})),this.isVimeo&&this.embed.enableTextTrack(i),F.call(this,this.media,"languagechange")),Ae.toggle.call(this,!0,n),this.isHTML5&&this.isVideo&&Ae.updateCues.call(this)):this.debug.warn("Track not found",e):this.debug.warn("Invalid caption argument",e):Ae.toggle.call(this,!1,n)},setLanguage:function(e){var t,n,i=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];A.string(e)?(n=e.toLowerCase(),this.captions.language=n,t=Ae.getTracks.call(this),n=Ae.findTrack.call(this,[n]),Ae.set.call(this,t.indexOf(n),i)):this.debug.warn("Invalid language argument",e)},getTracks:function(){var t=this,n=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return Array.from((this.media||{}).textTracks||[]).filter(function(e){return!t.isHTML5||n||t.captions.meta.has(e)}).filter(function(e){return["captions","subtitles"].includes(e.kind)})},findTrack:function(e){function n(e){return Number((t.captions.meta.get(e)||{}).default)}var i,t=this,a=1<arguments.length&&void 0!==arguments[1]&&arguments[1],o=Ae.getTracks.call(this),s=Array.from(o).sort(function(e,t){return n(t)-n(e)});return e.every(function(t){return!(i=s.find(function(e){return e.language===t}))}),i||(a?s[0]:void 0)},getCurrentTrack:function(){return Ae.getTracks.call(this)[this.currentTrack]},getLabel:function(e){var t=e;return!A.track(t)&&te.textTracks&&this.captions.toggled&&(t=Ae.getCurrentTrack.call(this)),A.track(t)?A.empty(t.label)?A.empty(t.language)?he("enabled",this.config):e.language.toUpperCase():t.label:he("disabled",this.config)},updateCues:function(e){var t,n;this.supported.ui&&(A.element(this.elements.captions)?A.nullOrUndefined(e)||Array.isArray(e)?((n=e)||(t=Ae.getCurrentTrack.call(this),n=Array.from((t||{}).activeCues||[]).map(function(e){return e.getCueAsHTML()}).map(de)),(t=n.map(function(e){return e.trim()}).join("\n"))!==this.elements.captions.innerHTML&&(B(this.elements.captions),(n=U("span",Z(this.config.selectors.caption))).innerHTML=t,this.elements.captions.appendChild(n),F.call(this,this.media,"cuechange"))):this.debug.warn("updateCues: Invalid input",e):this.debug.warn("No captions element to render to"))}},Se={enabled:!0,title:"",debug:!1,autoplay:!1,autopause:!0,playsinline:!0,seekTime:10,volume:1,muted:!1,duration:null,displayDuration:!0,invertTime:!0,toggleInvert:!0,ratio:null,clickToPlay:!0,hideControls:!0,resetOnEnd:!1,disableContextMenu:!0,loadSprite:!0,iconPrefix:"plyr",iconUrl:"https://cdn.plyr.io/3.5.6/plyr.svg",blankVideo:"https://cdn.plyr.io/static/blank.mp4",quality:{default:576,options:[4320,2880,2160,1440,1080,720,576,480,360,240]},loop:{active:!1},speed:{selected:1,options:[.5,.75,1,1.25,1.5,1.75,2]},keyboard:{focused:!0,global:!1},tooltips:{controls:!1,seek:!0},captions:{active:!1,language:"auto",update:!1},fullscreen:{enabled:!0,fallback:!0,iosNative:!1},storage:{enabled:!0,key:"plyr"},controls:["play-large","play","progress","current-time","mute","volume","captions","settings","pip","airplay","fullscreen"],settings:["captions","quality","speed"],i18n:{restart:"Restart",rewind:"Rewind {seektime}s",play:"Play",pause:"Pause",fastForward:"Forward {seektime}s",seek:"Seek",seekLabel:"{currentTime} of {duration}",played:"Played",buffered:"Buffered",currentTime:"Current time",duration:"Duration",volume:"Volume",mute:"Mute",unmute:"Unmute",enableCaptions:"Enable captions",disableCaptions:"Disable captions",download:"Download",enterFullscreen:"Enter fullscreen",exitFullscreen:"Exit fullscreen",frameTitle:"Player for {title}",captions:"Captions",settings:"Settings",menuBack:"Go back to previous menu",speed:"Speed",normal:"Normal",quality:"Quality",loop:"Loop",start:"Start",end:"End",all:"All",reset:"Reset",disabled:"Disabled",enabled:"Enabled",advertisement:"Ad",qualityBadge:{2160:"4K",1440:"HD",1080:"HD",720:"HD",576:"SD",480:"SD"}},urls:{download:null,vimeo:{sdk:"https://player.vimeo.com/api/player.js",iframe:"https://player.vimeo.com/video/{0}?{1}",api:"https://vimeo.com/api/v2/video/{0}.json"},youtube:{sdk:"https://www.youtube.com/iframe_api",api:"https://noembed.com/embed?url=https://www.youtube.com/watch?v={0}"},googleIMA:{sdk:"https://imasdk.googleapis.com/js/sdkloader/ima3.js"}},listeners:{seek:null,play:null,pause:null,restart:null,rewind:null,fastForward:null,mute:null,volume:null,captions:null,download:null,fullscreen:null,pip:null,airplay:null,speed:null,quality:null,loop:null,language:null},events:["ended","progress","stalled","playing","waiting","canplay","canplaythrough","loadstart","loadeddata","loadedmetadata","timeupdate","volumechange","play","pause","error","seeking","seeked","emptied","ratechange","cuechange","download","enterfullscreen","exitfullscreen","captionsenabled","captionsdisabled","languagechange","controlshidden","controlsshown","ready","statechange","qualitychange","adsloaded","adscontentpause","adscontentresume","adstarted","adsmidpoint","adscomplete","adsallcomplete","adsimpression","adsclick"],selectors:{editable:"input, textarea, select, [contenteditable]",container:".plyr",controls:{container:null,wrapper:".plyr__controls"},labels:"[data-plyr]",buttons:{play:'[data-plyr="play"]',pause:'[data-plyr="pause"]',restart:'[data-plyr="restart"]',rewind:'[data-plyr="rewind"]',fastForward:'[data-plyr="fast-forward"]',mute:'[data-plyr="mute"]',captions:'[data-plyr="captions"]',download:'[data-plyr="download"]',fullscreen:'[data-plyr="fullscreen"]',pip:'[data-plyr="pip"]',airplay:'[data-plyr="airplay"]',settings:'[data-plyr="settings"]',loop:'[data-plyr="loop"]'},inputs:{seek:'[data-plyr="seek"]',volume:'[data-plyr="volume"]',speed:'[data-plyr="speed"]',language:'[data-plyr="language"]',quality:'[data-plyr="quality"]'},display:{currentTime:".plyr__time--current",duration:".plyr__time--duration",buffer:".plyr__progress__buffer",loop:".plyr__progress__loop",volume:".plyr__volume--display"},progress:".plyr__progress",captions:".plyr__captions",caption:".plyr__caption"},classNames:{type:"plyr--{0}",provider:"plyr--{0}",video:"plyr__video-wrapper",embed:"plyr__video-embed",videoFixedRatio:"plyr__video-wrapper--fixed-ratio",embedContainer:"plyr__video-embed__container",poster:"plyr__poster",posterEnabled:"plyr__poster-enabled",ads:"plyr__ads",control:"plyr__control",controlPressed:"plyr__control--pressed",playing:"plyr--playing",paused:"plyr--paused",stopped:"plyr--stopped",loading:"plyr--loading",hover:"plyr--hover",tooltip:"plyr__tooltip",cues:"plyr__cues",hidden:"plyr__sr-only",hideControls:"plyr--hide-controls",isIos:"plyr--is-ios",isTouch:"plyr--is-touch",uiSupported:"plyr--full-ui",noTransition:"plyr--no-transition",display:{time:"plyr__time"},menu:{value:"plyr__menu__value",badge:"plyr__badge",open:"plyr--menu-open"},captions:{enabled:"plyr--captions-enabled",active:"plyr--captions-active"},fullscreen:{enabled:"plyr--fullscreen-enabled",fallback:"plyr--fullscreen-fallback"},pip:{supported:"plyr--pip-supported",active:"plyr--pip-active"},airplay:{supported:"plyr--airplay-supported",active:"plyr--airplay-active"},tabFocus:"plyr__tab-focus",previewThumbnails:{thumbContainer:"plyr__preview-thumb",thumbContainerShown:"plyr__preview-thumb--is-shown",imageContainer:"plyr__preview-thumb__image-container",timeContainer:"plyr__preview-thumb__time-container",scrubbingContainer:"plyr__preview-scrubbing",scrubbingContainerShown:"plyr__preview-scrubbing--is-shown"}},attributes:{embed:{provider:"data-plyr-provider",id:"data-plyr-embed-id"}},ads:{enabled:!1,publisherId:"",tagUrl:""},previewThumbnails:{enabled:!1,src:""},vimeo:{byline:!1,portrait:!1,title:!1,speed:!0,transparent:!1},youtube:{noCookie:!1,rel:0,showinfo:0,iv_load_policy:3,modestbranding:1}},Ie="picture-in-picture",Me={html5:"html5",youtube:"youtube",vimeo:"vimeo"},Pe={audio:"audio",video:"video"},_e=(e(Le,[{key:"log",get:function(){return this.enabled?Function.prototype.bind.call(console.log,console):Ee}},{key:"warn",get:function(){return this.enabled?Function.prototype.bind.call(console.warn,console):Ee}},{key:"error",get:function(){return this.enabled?Function.prototype.bind.call(console.error,console):Ee}}]),Le);function Le(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];r(this,Le),this.enabled=window.console&&e,this.enabled&&this.log("Debugging enabled")}function Ne(){var e;this.enabled&&(e=this.player.elements.buttons.fullscreen,A.element(e)&&(e.pressed=this.active),F.call(this.player,this.target,this.active?"enterfullscreen":"exitfullscreen",!0),P.isIos||function(){var n,i,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];A.element(e)&&(e=Q.call(this,"button:not(:disabled), input:not(:disabled), [tabindex]"),n=e[0],i=e[e.length-1],L.call(this,this.elements.container,"keydown",function(e){var t;"Tab"===e.key&&9===e.keyCode&&((t=document.activeElement)!==i||e.shiftKey?t===n&&e.shiftKey&&(i.focus(),e.preventDefault()):(n.focus(),e.preventDefault()))},t,!1))}.call(this.player,this.target,this.active))}function De(){var e,t,n,i=0<arguments.length&&void 0!==arguments[0]&&arguments[0];i?this.scrollPosition={x:window.scrollX||0,y:window.scrollY||0}:window.scrollTo(this.scrollPosition.x,this.scrollPosition.y),document.body.style.overflow=i?"hidden":"",Y(this.target,this.player.config.classNames.fullscreen.fallback,i),P.isIos&&(e=document.head.querySelector('meta[name="viewport"]'),t="viewport-fit=cover",e||(e=document.createElement("meta")).setAttribute("name","viewport"),n=A.string(e.content)&&e.content.includes(t),i?(this.cleanupViewport=!n,n||(e.content+=",".concat(t))):this.cleanupViewport&&(e.content=e.content.split(",").filter(function(e){return e.trim()!==t}).join(","))),Ne.call(this)}var Oe=(e(Fe,[{key:"update",value:function(){var e;this.enabled?(e=this.forceFallback?"Fallback (forced)":Fe.native?"Native":"Fallback",this.player.debug.log("".concat(e," fullscreen enabled"))):this.player.debug.log("Fullscreen not supported and fallback disabled"),Y(this.player.elements.container,this.player.config.classNames.fullscreen.enabled,this.enabled)}},{key:"enter",value:function(){this.enabled&&(P.isIos&&this.player.config.fullscreen.iosNative?this.target.webkitEnterFullscreen():!Fe.native||this.forceFallback?De.call(this,!0):this.prefix?A.empty(this.prefix)||this.target["".concat(this.prefix,"Request").concat(this.property)]():this.target.requestFullscreen())}},{key:"exit",value:function(){var e;this.enabled&&(P.isIos&&this.player.config.fullscreen.iosNative?(this.target.webkitExitFullscreen(),this.player.play()):!Fe.native||this.forceFallback?De.call(this,!1):this.prefix?A.empty(this.prefix)||(e="moz"===this.prefix?"Cancel":"Exit",document["".concat(this.prefix).concat(e).concat(this.property)]()):(document.cancelFullScreen||document.exitFullscreen).call(document))}},{key:"toggle",value:function(){this.active?this.exit():this.enter()}},{key:"usingNative",get:function(){return Fe.native&&!this.forceFallback}},{key:"enabled",get:function(){return(Fe.native||this.player.config.fullscreen.fallback)&&this.player.config.fullscreen.enabled&&this.player.supported.ui&&this.player.isVideo}},{key:"active",get:function(){return!!this.enabled&&(!Fe.native||this.forceFallback?G(this.target,this.player.config.classNames.fullscreen.fallback):(this.prefix?document["".concat(this.prefix).concat(this.property,"Element")]:document.fullscreenElement)===this.target)}},{key:"target",get:function(){return P.isIos&&this.player.config.fullscreen.iosNative?this.player.media:this.player.elements.container}}],[{key:"native",get:function(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}},{key:"prefix",get:function(){if(A.function(document.exitFullscreen))return"";var t="";return["webkit","moz","ms"].some(function(e){return!(!A.function(document["".concat(e,"ExitFullscreen")])&&!A.function(document["".concat(e,"CancelFullScreen")])||(t=e,0))}),t}},{key:"property",get:function(){return"moz"===this.prefix?"FullScreen":"Fullscreen"}}]),Fe);function Fe(e){var t=this;r(this,Fe),this.player=e,this.prefix=Fe.prefix,this.property=Fe.property,this.scrollPosition={x:0,y:0},this.forceFallback="force"===e.config.fullscreen.fallback,N.call(this.player,document,"ms"===this.prefix?"MSFullscreenChange":"".concat(this.prefix,"fullscreenchange"),function(){Ne.call(t)}),N.call(this.player,this.player.elements.container,"dblclick",function(e){A.element(t.player.elements.controls)&&t.player.elements.controls.contains(e.target)||t.toggle()}),this.update()}function Re(a,e){var o=1<arguments.length&&void 0!==e?e:1;return new Promise(function(e,t){function n(){delete i.onload,delete i.onerror,(i.naturalWidth>=o?e:t)(i)}var i=new Image;Object.assign(i,{onload:n,onerror:n,src:a})})}var He={addStyleHook:function(){Y(this.elements.container,this.config.selectors.container.replace(".",""),!0),Y(this.elements.container,this.config.classNames.uiSupported,this.supported.ui)},toggleNativeControls:function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0]&&this.isHTML5?this.media.setAttribute("controls",""):this.media.removeAttribute("controls")},build:function(){var e=this;if(this.listeners.media(),!this.supported.ui)return this.debug.warn("Basic support only for ".concat(this.provider," ").concat(this.type)),void He.toggleNativeControls.call(this,!0);A.element(this.elements.controls)||(Te.inject.call(this),this.listeners.controls()),He.toggleNativeControls.call(this),this.isHTML5&&Ae.setup.call(this),this.volume=null,this.muted=null,this.loop=null,this.quality=null,this.speed=null,Te.updateVolume.call(this),Te.timeUpdate.call(this),He.checkPlaying.call(this),Y(this.elements.container,this.config.classNames.pip.supported,te.pip&&this.isHTML5&&this.isVideo),Y(this.elements.container,this.config.classNames.airplay.supported,te.airplay&&this.isHTML5),Y(this.elements.container,this.config.classNames.isIos,P.isIos),Y(this.elements.container,this.config.classNames.isTouch,this.touch),this.ready=!0,setTimeout(function(){F.call(e,e.media,"ready")},0),He.setTitle.call(this),this.poster&&He.setPoster.call(this,this.poster,!1).catch(function(){}),this.config.duration&&Te.durationUpdate.call(this)},setTitle:function(){var e,t,n,i=he("play",this.config);A.string(this.config.title)&&!A.empty(this.config.title)&&(i+=", ".concat(this.config.title)),Array.from(this.elements.buttons.play||[]).forEach(function(e){e.setAttribute("aria-label",i)}),this.isEmbed&&(e=$.call(this,"iframe"),A.element(e)&&(t=A.empty(this.config.title)?"video":this.config.title,n=he("frameTitle",this.config),e.setAttribute("title",n.replace("{title}",t))))},togglePoster:function(e){Y(this.elements.container,this.config.classNames.posterEnabled,e)},setPoster:function(t){var n=this;return 1<arguments.length&&void 0!==arguments[1]&&!arguments[1]||!this.poster?(this.media.setAttribute("poster",t),function(){var t=this;return new Promise(function(e){return t.ready?setTimeout(e,0):N.call(t,t.elements.container,"ready",e)}).then(function(){})}.call(this).then(function(){return Re(t)}).catch(function(e){throw t===n.poster&&He.togglePoster.call(n,!1),e}).then(function(){if(t!==n.poster)throw new Error("setPoster cancelled by later call to setPoster")}).then(function(){return Object.assign(n.elements.poster.style,{backgroundImage:"url('".concat(t,"')"),backgroundSize:""}),He.togglePoster.call(n,!0),t})):Promise.reject(new Error("Poster already set"))},checkPlaying:function(e){var t=this;Y(this.elements.container,this.config.classNames.playing,this.playing),Y(this.elements.container,this.config.classNames.paused,this.paused),Y(this.elements.container,this.config.classNames.stopped,this.stopped),Array.from(this.elements.buttons.play||[]).forEach(function(e){Object.assign(e,{pressed:t.playing})}),A.event(e)&&"timeupdate"===e.type||He.toggleControls.call(this)},checkLoading:function(e){var t=this;this.loading=["stalled","waiting"].includes(e.type),clearTimeout(this.timers.loading),this.timers.loading=setTimeout(function(){Y(t.elements.container,t.config.classNames.loading,t.loading),He.toggleControls.call(t)},this.loading?250:0)},toggleControls:function(e){var t,n=this.elements.controls;n&&this.config.hideControls&&(t=this.touch&&this.lastSeekTime+2e3>Date.now(),this.toggleControls(Boolean(e||this.loading||this.paused||n.pressed||n.hover||t)))}},qe=(e(je,[{key:"handleKey",value:function(e){var t=this.player,n=t.elements,i=e.keyCode||e.which,a="keydown"===e.type,o=a&&i===this.lastKey;if(!(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)&&A.number(i))if(a){var s=document.activeElement;if(A.element(s)){a=t.config.selectors.editable;if(s!==n.inputs.seek&&X(s,a))return;if(32===e.which&&X(s,'button, [role^="menuitem"]'))return}switch([32,37,38,39,40,48,49,50,51,52,53,54,56,57,67,70,73,75,76,77,79].includes(i)&&(e.preventDefault(),e.stopPropagation()),i){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:o||(t.currentTime=t.duration/10*(i-48));break;case 32:case 75:o||t.togglePlay();break;case 38:t.increaseVolume(.1);break;case 40:t.decreaseVolume(.1);break;case 77:o||(t.muted=!t.muted);break;case 39:t.forward();break;case 37:t.rewind();break;case 70:t.fullscreen.toggle();break;case 67:o||t.toggleCaptions();break;case 76:t.loop=!t.loop}27===i&&!t.fullscreen.usingNative&&t.fullscreen.active&&t.fullscreen.toggle(),this.lastKey=i}else this.lastKey=null}},{key:"toggleMenu",value:function(e){Te.toggleMenu.call(this.player,e)}},{key:"firstTouch",value:function(){var e=this.player,t=e.elements;e.touch=!0,Y(t.container,e.config.classNames.isTouch,!0)}},{key:"setTabFocus",value:function(e){var t,n=this.player,i=n.elements;clearTimeout(this.focusTimer),"keydown"===e.type&&9!==e.which||("keydown"===e.type&&(this.lastKeyDown=e.timeStamp),t=e.timeStamp-this.lastKeyDown<=20,"focus"===e.type&&!t||(t=n.config.classNames.tabFocus,Y(Q.call(n,".".concat(t)),t,!1),this.focusTimer=setTimeout(function(){var e=document.activeElement;i.container.contains(e)&&Y(document.activeElement,n.config.classNames.tabFocus,!0)},10)))}},{key:"global",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=this.player;t.config.keyboard.global&&L.call(t,window,"keydown keyup",this.handleKey,e,!1),L.call(t,document.body,"click",this.toggleMenu,e),O.call(t,document.body,"touchstart",this.firstTouch),L.call(t,document.body,"keydown focus blur",this.setTabFocus,e,!1,!0)}},{key:"container",value:function(){var r=this.player,e=r.config,l=r.elements,n=r.timers;!e.keyboard.global&&e.keyboard.focused&&N.call(r,l.container,"keydown keyup",this.handleKey,!1),N.call(r,l.container,"mousemove mouseleave touchstart touchmove enterfullscreen exitfullscreen",function(e){var t=l.controls;t&&"enterfullscreen"===e.type&&(t.pressed=!1,t.hover=!1);t=0;["touchstart","touchmove","mousemove"].includes(e.type)&&(He.toggleControls.call(r,!0),t=r.touch?3e3:2e3),clearTimeout(n.controls),n.controls=setTimeout(function(){return He.toggleControls.call(r,!1)},t)});function c(e){if(!e)return oe.call(r);var e=(t=l.container.getBoundingClientRect()).width,t=t.height;return oe.call(r,"".concat(e,":").concat(t))}function u(){clearTimeout(n.resized),n.resized=setTimeout(c,50)}N.call(r,l.container,"enterfullscreen exitfullscreen",function(e){var t,n,i,a=r.fullscreen,o=a.target,s=a.usingNative;o!==l.container||!r.isEmbed&&A.empty(r.config.ratio)||(t="enterfullscreen"===e.type,(i=c(t)).padding,n=i.ratio,a=t,r.isVimeo&&(o=r.elements.wrapper.firstChild,e=d(n,2)[1],n=(i=d(ae.call(r),2))[0],i=i[1],o.style.maxWidth=a?"".concat(e/i*n,"px"):null,o.style.margin=a?"0 auto":null),s||(t?N:D).call(r,window,"resize",u))})}},{key:"media",value:function(){var t=this,n=this.player,i=n.elements;if(N.call(n,n.media,"timeupdate seeking seeked",function(e){return Te.timeUpdate.call(n,e)}),N.call(n,n.media,"durationchange loadeddata loadedmetadata",function(e){return Te.durationUpdate.call(n,e)}),N.call(n,n.media,"canplay loadeddata",function(){K(i.volume,!n.hasAudio),K(i.buttons.mute,!n.hasAudio)}),N.call(n,n.media,"ended",function(){n.isHTML5&&n.isVideo&&n.config.resetOnEnd&&n.restart()}),N.call(n,n.media,"progress playing seeking seeked",function(e){return Te.updateProgress.call(n,e)}),N.call(n,n.media,"volumechange",function(e){return Te.updateVolume.call(n,e)}),N.call(n,n.media,"playing play pause ended emptied timeupdate",function(e){return He.checkPlaying.call(n,e)}),N.call(n,n.media,"waiting canplay seeked playing",function(e){return He.checkLoading.call(n,e)}),n.supported.ui&&n.config.clickToPlay&&!n.isAudio){var a=$.call(n,".".concat(n.config.classNames.video));if(!A.element(a))return;N.call(n,i.container,"click",function(e){([i.container,a].includes(e.target)||a.contains(e.target))&&(n.touch&&n.config.hideControls||(n.ended?(t.proxy(e,n.restart,"restart"),t.proxy(e,n.play,"play")):t.proxy(e,n.togglePlay,"play")))})}n.supported.ui&&n.config.disableContextMenu&&N.call(n,i.wrapper,"contextmenu",function(e){e.preventDefault()},!1),N.call(n,n.media,"volumechange",function(){n.storage.set({volume:n.volume,muted:n.muted})}),N.call(n,n.media,"ratechange",function(){Te.updateSetting.call(n,"speed"),n.storage.set({speed:n.speed})}),N.call(n,n.media,"qualitychange",function(e){Te.updateSetting.call(n,"quality",null,e.detail.quality)}),N.call(n,n.media,"ready qualitychange",function(){Te.setDownloadUrl.call(n)});var e=n.config.events.concat(["keyup","keydown"]).join(" ");N.call(n,n.media,e,function(e){var t=e.detail,t=void 0===t?{}:t;"error"===e.type&&(t=n.media.error),F.call(n,i.container,e.type,!0,t)})}},{key:"proxy",value:function(e,t,n){var i=this.player,a=i.config.listeners[n],n=!0;A.function(a)&&(n=a.call(i,e)),n&&A.function(t)&&t.call(i,e)}},{key:"bind",value:function(e,t,n,i){var a=this,o=!(4<arguments.length&&void 0!==arguments[4])||arguments[4],s=this.player,r=s.config.listeners[i],r=A.function(r);N.call(s,e,t,function(e){return a.proxy(e,n,i)},o&&!r)}},{key:"controls",value:function(){var e,i=this,a=this.player,o=a.elements,t=P.isIE?"change":"input";o.buttons.play&&Array.from(o.buttons.play).forEach(function(e){i.bind(e,"click",a.togglePlay,"play")}),this.bind(o.buttons.restart,"click",a.restart,"restart"),this.bind(o.buttons.rewind,"click",a.rewind,"rewind"),this.bind(o.buttons.fastForward,"click",a.forward,"fastForward"),this.bind(o.buttons.mute,"click",function(){a.muted=!a.muted},"mute"),this.bind(o.buttons.captions,"click",function(){return a.toggleCaptions()}),this.bind(o.buttons.download,"click",function(){F.call(a,a.media,"download")},"download"),this.bind(o.buttons.fullscreen,"click",function(){a.fullscreen.toggle()},"fullscreen"),this.bind(o.buttons.pip,"click",function(){a.pip="toggle"},"pip"),this.bind(o.buttons.airplay,"click",a.airplay,"airplay"),this.bind(o.buttons.settings,"click",function(e){e.stopPropagation(),Te.toggleMenu.call(a,e)}),this.bind(o.buttons.settings,"keyup",function(e){var t=e.which;[13,32].includes(t)&&(13!==t?(e.preventDefault(),e.stopPropagation(),Te.toggleMenu.call(a,e)):Te.focusFirstMenuItem.call(a,null,!0))},null,!1),this.bind(o.settings.menu,"keydown",function(e){27===e.which&&Te.toggleMenu.call(a,e)}),this.bind(o.inputs.seek,"mousedown mousemove",function(e){var t=o.progress.getBoundingClientRect(),t=100/t.width*(e.pageX-t.left);e.currentTarget.setAttribute("seek-value",t)}),this.bind(o.inputs.seek,"mousedown mouseup keydown keyup touchstart touchend",function(e){var t=e.currentTarget,n=e.keyCode||e.which;A.keyboardEvent(e)&&39!==n&&37!==n||(a.lastSeekTime=Date.now(),n=t.hasAttribute("play-on-seeked"),e=["mouseup","touchend","keyup"].includes(e.type),n&&e?(t.removeAttribute("play-on-seeked"),a.play()):!e&&a.playing&&(t.setAttribute("play-on-seeked",""),a.pause()))}),P.isIos&&(e=Q.call(a,'input[type="range"]'),Array.from(e).forEach(function(e){return i.bind(e,t,function(e){return M(e.target)})})),this.bind(o.inputs.seek,t,function(e){var t=e.currentTarget,e=t.getAttribute("seek-value");A.empty(e)&&(e=t.value),t.removeAttribute("seek-value"),a.currentTime=e/t.max*a.duration},"seek"),this.bind(o.progress,"mouseenter mouseleave mousemove",function(e){return Te.updateSeekTooltip.call(a,e)}),this.bind(o.progress,"mousemove touchmove",function(e){var t=a.previewThumbnails;t&&t.loaded&&t.startMove(e)}),this.bind(o.progress,"mouseleave click",function(){var e=a.previewThumbnails;e&&e.loaded&&e.endMove(!1,!0)}),this.bind(o.progress,"mousedown touchstart",function(e){var t=a.previewThumbnails;t&&t.loaded&&t.startScrubbing(e)}),this.bind(o.progress,"mouseup touchend",function(e){var t=a.previewThumbnails;t&&t.loaded&&t.endScrubbing(e)}),P.isWebkit&&Array.from(Q.call(a,'input[type="range"]')).forEach(function(e){i.bind(e,"input",function(e){return Te.updateRangeFill.call(a,e.target)})}),a.config.toggleInvert&&!A.element(o.display.duration)&&this.bind(o.display.currentTime,"click",function(){0!==a.currentTime&&(a.config.invertTime=!a.config.invertTime,Te.timeUpdate.call(a))}),this.bind(o.inputs.volume,t,function(e){a.volume=e.target.value},"volume"),this.bind(o.controls,"mouseenter mouseleave",function(e){o.controls.hover=!a.touch&&"mouseenter"===e.type}),this.bind(o.controls,"mousedown mouseup touchstart touchend touchcancel",function(e){o.controls.pressed=["mousedown","touchstart"].includes(e.type)}),this.bind(o.controls,"focusin",function(){var e=a.config,t=a.timers;Y(o.controls,e.classNames.noTransition,!0),He.toggleControls.call(a,!0),setTimeout(function(){Y(o.controls,e.classNames.noTransition,!1)},0);var n=i.touch?3e3:4e3;clearTimeout(t.controls),t.controls=setTimeout(function(){return He.toggleControls.call(a,!1)},n)}),this.bind(o.inputs.volume,"wheel",function(e){var t=e.webkitDirectionInvertedFromDevice,n=d([e.deltaX,-e.deltaY].map(function(e){return t?-e:e}),2),i=n[0],n=n[1],i=Math.sign(Math.abs(i)>Math.abs(n)?i:n);a.increaseVolume(i/50);n=a.media.volume;(1===i&&n<1||-1===i&&0<n)&&e.preventDefault()},"volume",!1)}}]),je);function je(e){r(this,je),this.player=e,this.lastKey=null,this.focusTimer=null,this.lastKeyDown=null,this.handleKey=this.handleKey.bind(this),this.toggleMenu=this.toggleMenu.bind(this),this.setTabFocus=this.setTabFocus.bind(this),this.firstTouch=this.firstTouch.bind(this)}var Ue=((Je={exports:{}}).exports=function(){var h=function(){},a={},l={},c={};function d(e,t){if(e){var n=c[e];if(l[e]=t,n)for(;n.length;)n[0](e,t),n.splice(0,1)}}function m(e,t){e.call&&(e={success:e}),t.length?(e.error||h)(t):(e.success||h)(e)}function t(e,t,n){var c,u;if(t&&t.trim&&(c=t),u=(c?n:t)||{},c){if(c in a)throw"LoadJS";a[c]=!0}function i(r,l){!function(e,t){for(var i=(e=e.push?e:[e]).length,n=i,a=[],o=function(e,t,n){if("e"==t&&a.push(e),"b"==t){if(!n)return;a.push(e)}--i||(m(u,e=a),r&&m({success:r,error:l},e),d(c,e))},s=0;s<n;s++)!function n(i,a,o,s){var r,l,e=document,t=o.async,c=(o.numRetries||0)+1,u=o.before||h,d=i.replace(/^(css|img)!/,"");s=s||0,/(^css!|\.css$)/.test(i)?((l=e.createElement("link")).rel="stylesheet",l.href=d,(r="hideFocus"in l)&&l.relList&&(r=0,l.rel="preload",l.as="style")):/(^img!|\.(png|gif|jpg|svg)$)/.test(i)?(l=e.createElement("img")).src=d:((l=e.createElement("script")).src=i,l.async=void 0===t||t),l.onload=l.onerror=l.onbeforeload=function(e){var t=e.type[0];if(r)try{l.sheet.cssText.length||(t="e")}catch(e){18!=e.code&&(t="e")}if("e"==t){if((s+=1)<c)return n(i,a,o,s)}else if("preload"==l.rel&&"style"==l.as)return l.rel="stylesheet";a(i,t,e.defaultPrevented)},!1!==u(i,l)&&e.head.appendChild(l)}(e[s],o,t)}(e,u)}if(u.returnPromise)return new Promise(i);i()}return t.ready=function(e,r){return function(e){e=e.push?e:[e];for(var t,n,i=[],a=e.length,o=a,s=function(e,t){t.length&&i.push(e),--o||m(r,i)};a--;)t=e[a],(n=l[t])?s(t,n):(c[t]=c[t]||[]).push(s)}(e),t},t.done=function(e){d(e,[])},t.reset=function(){a={},l={},c={}},t.isDefined=function(e){return e in a},t}(),Je.exports);function Ve(n){return new Promise(function(e,t){Ue(n,{success:e,error:t})})}function ze(e){e&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===e&&(this.media.paused=!e,F.call(this,this.media,e?"play":"pause"))}var Be={setup:function(){var t=this;Y(this.elements.wrapper,this.config.classNames.embed,!0),oe.call(this),A.object(window.Vimeo)?Be.ready.call(this):Ve(this.config.urls.vimeo.sdk).then(function(){Be.ready.call(t)}).catch(function(e){t.debug.warn("Vimeo SDK (player.js) failed to load",e)})},ready:function(){var n=this,s=this,e=s.config.vimeo,t=Ce(H({},{loop:s.config.loop.active,autoplay:s.autoplay,muted:s.muted,gesture:"media",playsinline:!this.config.fullscreen.iosNative},e)),i=s.media.getAttribute("src");A.empty(i)&&(i=s.media.getAttribute(s.config.attributes.embed.id));e=i,i=A.empty(e)?null:!A.number(Number(e))&&e.match(/^.*(vimeo.com\/|video\/)(\d+).*/)?RegExp.$2:e,e=U("iframe"),t=le(s.config.urls.vimeo.iframe,i,t);e.setAttribute("src",t),e.setAttribute("allowfullscreen",""),e.setAttribute("allowtransparency",""),e.setAttribute("allow","autoplay");t=U("div",{poster:s.poster,class:s.config.classNames.embedContainer});t.appendChild(e),s.media=W(t,s.media),ge(le(s.config.urls.vimeo.api,i),"json").then(function(e){A.empty(e)||((e=new URL(e[0].thumbnail_large)).pathname="".concat(e.pathname.split("_")[0],".jpg"),He.setPoster.call(s,e.href).catch(function(){}))}),s.embed=new window.Vimeo.Player(e,{autopause:s.config.autopause,muted:s.muted}),s.media.paused=!0,s.media.currentTime=0,s.supported.ui&&s.embed.disableTextTrack(),s.media.play=function(){return ze.call(s,!0),s.embed.play()},s.media.pause=function(){return ze.call(s,!1),s.embed.pause()},s.media.stop=function(){s.pause(),s.currentTime=0};var a=s.media.currentTime;Object.defineProperty(s.media,"currentTime",{get:function(){return a},set:function(e){var t=s.embed,n=s.media,i=s.paused,a=s.volume,o=i&&!t.hasPlayed;n.seeking=!0,F.call(s,n,"seeking"),Promise.resolve(o&&t.setVolume(0)).then(function(){return t.setCurrentTime(e)}).then(function(){return o&&t.pause()}).then(function(){return o&&t.setVolume(a)}).catch(function(){})}});var o=s.config.speed.selected;Object.defineProperty(s.media,"playbackRate",{get:function(){return o},set:function(e){s.embed.setPlaybackRate(e).then(function(){o=e,F.call(s,s.media,"ratechange")}).catch(function(e){"Error"===e.name&&Te.setSpeedMenu.call(s,[])})}});var r=s.config.volume;Object.defineProperty(s.media,"volume",{get:function(){return r},set:function(e){s.embed.setVolume(e).then(function(){r=e,F.call(s,s.media,"volumechange")})}});var l=s.config.muted;Object.defineProperty(s.media,"muted",{get:function(){return l},set:function(e){var t=!!A.boolean(e)&&e;s.embed.setVolume(t?0:s.config.volume).then(function(){l=t,F.call(s,s.media,"volumechange")})}});var c,u=s.config.loop;Object.defineProperty(s.media,"loop",{get:function(){return u},set:function(e){var t=A.boolean(e)?e:s.config.loop.active;s.embed.setLoop(t).then(function(){u=t})}}),s.embed.getVideoUrl().then(function(e){c=e,Te.setDownloadUrl.call(s)}).catch(function(e){n.debug.warn(e)}),Object.defineProperty(s.media,"currentSrc",{get:function(){return c}}),Object.defineProperty(s.media,"ended",{get:function(){return s.currentTime===s.duration}}),Promise.all([s.embed.getVideoWidth(),s.embed.getVideoHeight()]).then(function(e){var t=d(e,2),e=t[0],t=t[1];s.embed.ratio=[e,t],oe.call(n)}),s.embed.setAutopause(s.config.autopause).then(function(e){s.config.autopause=e}),s.embed.getVideoTitle().then(function(e){s.config.title=e,He.setTitle.call(n)}),s.embed.getCurrentTime().then(function(e){a=e,F.call(s,s.media,"timeupdate")}),s.embed.getDuration().then(function(e){s.media.duration=e,F.call(s,s.media,"durationchange")}),s.embed.getTextTracks().then(function(e){s.media.textTracks=e,Ae.setup.call(s)}),s.embed.on("cuechange",function(e){e=e.cues,e=(void 0===e?[]:e).map(function(e){return t=e.text,n=document.createDocumentFragment(),e=document.createElement("div"),n.appendChild(e),e.innerHTML=t,n.firstChild.innerText;var t,n});Ae.updateCues.call(s,e)}),s.embed.on("loaded",function(){s.embed.getPaused().then(function(e){ze.call(s,!e),e||F.call(s,s.media,"playing")}),A.element(s.embed.element)&&s.supported.ui&&s.embed.element.setAttribute("tabindex",-1)}),s.embed.on("play",function(){ze.call(s,!0),F.call(s,s.media,"playing")}),s.embed.on("pause",function(){ze.call(s,!1)}),s.embed.on("timeupdate",function(e){s.media.seeking=!1,a=e.seconds,F.call(s,s.media,"timeupdate")}),s.embed.on("progress",function(e){s.media.buffered=e.percent,F.call(s,s.media,"progress"),1===parseInt(e.percent,10)&&F.call(s,s.media,"canplaythrough"),s.embed.getDuration().then(function(e){e!==s.media.duration&&(s.media.duration=e,F.call(s,s.media,"durationchange"))})}),s.embed.on("seeked",function(){s.media.seeking=!1,F.call(s,s.media,"seeked")}),s.embed.on("ended",function(){s.media.paused=!0,F.call(s,s.media,"ended")}),s.embed.on("error",function(e){s.media.error=e,F.call(s,s.media,"error")}),setTimeout(function(){return He.build.call(s)},0)}};function We(e){e&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===e&&(this.media.paused=!e,F.call(this,this.media,e?"play":"pause"))}var Ze={setup:function(){var e,t=this;Y(this.elements.wrapper,this.config.classNames.embed,!0),A.object(window.YT)&&A.function(window.YT.Player)?Ze.ready.call(this):(e=window.onYouTubeIframeAPIReady,window.onYouTubeIframeAPIReady=function(){A.function(e)&&e(),Ze.ready.call(t)},Ve(this.config.urls.youtube.sdk).catch(function(e){t.debug.warn("YouTube API failed to load",e)}))},getTitle:function(e){var i=this;ge(le(this.config.urls.youtube.api,e)).then(function(e){var t,n;A.object(e)&&(t=e.title,n=e.height,e=e.width,i.config.title=t,He.setTitle.call(i),i.embed.ratio=[e,n]),oe.call(i)}).catch(function(){oe.call(i)})},ready:function(){var a,e,t,o=this,n=o.media&&o.media.getAttribute("id");!A.empty(n)&&n.startsWith("youtube-")||(t=o.media.getAttribute("src"),A.empty(t)&&(t=o.media.getAttribute(this.config.attributes.embed.id)),n=t,a=A.empty(n)?null:n.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/)?RegExp.$2:n,t=o.provider,t=U("div",{id:n="".concat(t,"-").concat(Math.floor(1e4*Math.random())),poster:o.poster}),o.media=W(t,o.media),Re((e=function(e){return"https://i.ytimg.com/vi/".concat(a,"/").concat(e,"default.jpg")})("maxres"),121).catch(function(){return Re(e("sd"),121)}).catch(function(){return Re(e("hq"))}).then(function(e){return He.setPoster.call(o,e.src)}).then(function(e){e.includes("maxres")||(o.elements.poster.style.backgroundSize="cover")}).catch(function(){}),t=o.config.youtube,o.embed=new window.YT.Player(n,{videoId:a,host:t.noCookie?"https://www.youtube-nocookie.com":"http:"===window.location.protocol?"http://www.youtube.com":void 0,playerVars:H({},{autoplay:o.config.autoplay?1:0,hl:o.config.hl,controls:o.supported.ui?0:1,disablekb:1,playsinline:o.config.fullscreen.iosNative?0:1,cc_load_policy:o.captions.active?1:0,cc_lang_pref:o.config.captions.language,widget_referrer:window?window.location.href:null},t),events:{onError:function(e){var t;o.media.error||(e={2:"The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.",5:"The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.",100:"The video requested was not found. This error occurs when a video has been removed (for any reason) or has been marked as private.",101:"The owner of the requested video does not allow it to be played in embedded players.",150:"The owner of the requested video does not allow it to be played in embedded players."}[t=e.data]||"An unknown error occured",o.media.error={code:t,message:e},F.call(o,o.media,"error"))},onPlaybackRateChange:function(e){e=e.target;o.media.playbackRate=e.getPlaybackRate(),F.call(o,o.media,"ratechange")},onReady:function(e){var t,n,i;A.function(o.media.play)||(t=e.target,Ze.getTitle.call(o,a),o.media.play=function(){We.call(o,!0),t.playVideo()},o.media.pause=function(){We.call(o,!1),t.pauseVideo()},o.media.stop=function(){t.stopVideo()},o.media.duration=t.getDuration(),o.media.paused=!0,o.media.currentTime=0,Object.defineProperty(o.media,"currentTime",{get:function(){return Number(t.getCurrentTime())},set:function(e){o.paused&&!o.embed.hasPlayed&&o.embed.mute(),o.media.seeking=!0,F.call(o,o.media,"seeking"),t.seekTo(e)}}),Object.defineProperty(o.media,"playbackRate",{get:function(){return t.getPlaybackRate()},set:function(e){t.setPlaybackRate(e)}}),n=o.config.volume,Object.defineProperty(o.media,"volume",{get:function(){return n},set:function(e){n=e,t.setVolume(100*n),F.call(o,o.media,"volumechange")}}),i=o.config.muted,Object.defineProperty(o.media,"muted",{get:function(){return i},set:function(e){e=A.boolean(e)?e:i;t[(i=e)?"mute":"unMute"](),F.call(o,o.media,"volumechange")}}),Object.defineProperty(o.media,"currentSrc",{get:function(){return t.getVideoUrl()}}),Object.defineProperty(o.media,"ended",{get:function(){return o.currentTime===o.duration}}),o.options.speed=t.getAvailablePlaybackRates(),o.supported.ui&&o.media.setAttribute("tabindex",-1),F.call(o,o.media,"timeupdate"),F.call(o,o.media,"durationchange"),clearInterval(o.timers.buffering),o.timers.buffering=setInterval(function(){o.media.buffered=t.getVideoLoadedFraction(),(null===o.media.lastBuffered||o.media.lastBuffered<o.media.buffered)&&F.call(o,o.media,"progress"),o.media.lastBuffered=o.media.buffered,1===o.media.buffered&&(clearInterval(o.timers.buffering),F.call(o,o.media,"canplaythrough"))},200),setTimeout(function(){return He.build.call(o)},50))},onStateChange:function(e){var t=e.target;switch(clearInterval(o.timers.playing),o.media.seeking&&[1,2].includes(e.data)&&(o.media.seeking=!1,F.call(o,o.media,"seeked")),e.data){case-1:F.call(o,o.media,"timeupdate"),o.media.buffered=t.getVideoLoadedFraction(),F.call(o,o.media,"progress");break;case 0:We.call(o,!1),o.media.loop?(t.stopVideo(),t.playVideo()):F.call(o,o.media,"ended");break;case 1:o.config.autoplay||!o.media.paused||o.embed.hasPlayed?(We.call(o,!0),F.call(o,o.media,"playing"),o.timers.playing=setInterval(function(){F.call(o,o.media,"timeupdate")},50),o.media.duration!==t.getDuration()&&(o.media.duration=t.getDuration(),F.call(o,o.media,"durationchange"))):o.media.pause();break;case 2:o.muted||o.embed.unMute(),We.call(o,!1)}F.call(o,o.elements.container,"statechange",!1,{code:e.data})}}}))}},Ke={setup:function(){this.media?(Y(this.elements.container,this.config.classNames.type.replace("{0}",this.type),!0),Y(this.elements.container,this.config.classNames.provider.replace("{0}",this.provider),!0),this.isEmbed&&Y(this.elements.container,this.config.classNames.type.replace("{0}","video"),!0),this.isVideo&&(this.elements.wrapper=U("div",{class:this.config.classNames.video}),q(this.media,this.elements.wrapper),this.elements.poster=U("div",{class:this.config.classNames.poster}),this.elements.wrapper.appendChild(this.elements.poster)),this.isHTML5?se.extend.call(this):this.isYouTube?Ze.setup.call(this):this.isVimeo&&Be.setup.call(this)):this.debug.warn("No media element found!")}},Ye=(e($e,[{key:"load",value:function(){var e=this;this.enabled&&(A.object(window.google)&&A.object(window.google.ima)?this.ready():Ve(this.player.config.urls.googleIMA.sdk).then(function(){e.ready()}).catch(function(){e.trigger("error",new Error("Google IMA SDK failed to load"))}))}},{key:"ready",value:function(){var e=this;this.enabled||(this.manager&&this.manager.destroy(),this.elements.displayContainer&&this.elements.displayContainer.destroy(),this.elements.container.remove()),this.startSafetyTimer(12e3,"ready()"),this.managerPromise.then(function(){e.clearSafetyTimer("onAdsManagerLoaded()")}),this.listeners(),this.setupIMA()}},{key:"setupIMA",value:function(){this.elements.container=U("div",{class:this.player.config.classNames.ads}),this.player.elements.container.appendChild(this.elements.container),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setLocale(this.player.config.ads.language),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.player.config.playsinline),this.elements.displayContainer=new google.ima.AdDisplayContainer(this.elements.container,this.player.media),this.requestAds()}},{key:"requestAds",value:function(){var t=this,e=this.player.elements.container;try{this.loader=new google.ima.AdsLoader(this.elements.displayContainer),this.loader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(e){return t.onAdsManagerLoaded(e)},!1),this.loader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,function(e){return t.onAdError(e)},!1);var n=new google.ima.AdsRequest;n.adTagUrl=this.tagUrl,n.linearAdSlotWidth=e.offsetWidth,n.linearAdSlotHeight=e.offsetHeight,n.nonLinearAdSlotWidth=e.offsetWidth,n.nonLinearAdSlotHeight=e.offsetHeight,n.forceNonLinearFullSlot=!1,n.setAdWillPlayMuted(!this.player.muted),this.loader.requestAds(n)}catch(t){this.onAdError(t)}}},{key:"pollCountdown",value:function(){var t=this;if(!(0<arguments.length&&void 0!==arguments[0]&&arguments[0]))return clearInterval(this.countdownTimer),void this.elements.container.removeAttribute("data-badge-text");this.countdownTimer=setInterval(function(){var e=ke(Math.max(t.manager.getRemainingTime(),0)),e="".concat(he("advertisement",t.player.config)," - ").concat(e);t.elements.container.setAttribute("data-badge-text",e)},100)}},{key:"onAdsManagerLoaded",value:function(e){var t,n=this;this.enabled&&((t=new google.ima.AdsRenderingSettings).restoreCustomPlaybackStateOnAdBreakComplete=!0,t.enablePreloading=!0,this.manager=e.getAdsManager(this.player,t),this.cuePoints=this.manager.getCuePoints(),this.manager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,function(e){return n.onAdError(e)}),Object.keys(google.ima.AdEvent.Type).forEach(function(e){n.manager.addEventListener(google.ima.AdEvent.Type[e],function(e){return n.onAdEvent(e)})}),this.trigger("loaded"))}},{key:"addCuePoints",value:function(){var i=this;A.empty(this.cuePoints)||this.cuePoints.forEach(function(e){var t,n;0!==e&&-1!==e&&e<i.player.duration&&(t=i.player.elements.progress,A.element(t)&&(n=100/i.player.duration*e,(e=U("span",{class:i.player.config.classNames.cues})).style.left="".concat(n.toString(),"%"),t.appendChild(e)))})}},{key:"onAdEvent",value:function(e){var t,n=this,i=this.player.elements.container,a=e.getAd(),o=e.getAdData();switch(t=e.type,F.call(n.player,n.player.media,"ads".concat(t.replace(/_/g,"").toLowerCase())),e.type){case google.ima.AdEvent.Type.LOADED:this.trigger("loaded"),this.pollCountdown(!0),a.isLinear()||(a.width=i.offsetWidth,a.height=i.offsetHeight);break;case google.ima.AdEvent.Type.STARTED:this.manager.setVolume(this.player.volume);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:this.loadAds();break;case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:this.pauseContent();break;case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:this.pollCountdown(),this.resumeContent();break;case google.ima.AdEvent.Type.LOG:o.adError&&this.player.debug.warn("Non-fatal ad error: ".concat(o.adError.getMessage()))}}},{key:"onAdError",value:function(e){this.cancel(),this.player.debug.warn("Ads error",e)}},{key:"listeners",value:function(){var i,a=this,e=this.player.elements.container;this.player.on("canplay",function(){a.addCuePoints()}),this.player.on("ended",function(){a.loader.contentComplete()}),this.player.on("timeupdate",function(){i=a.player.currentTime}),this.player.on("seeked",function(){var n=a.player.currentTime;A.empty(a.cuePoints)||a.cuePoints.forEach(function(e,t){i<e&&e<n&&(a.manager.discardAdBreak(),a.cuePoints.splice(t,1))})}),window.addEventListener("resize",function(){a.manager&&a.manager.resize(e.offsetWidth,e.offsetHeight,google.ima.ViewMode.NORMAL)})}},{key:"play",value:function(){var t=this,e=this.player.elements.container;this.managerPromise||this.resumeContent(),this.managerPromise.then(function(){t.manager.setVolume(t.player.volume),t.elements.displayContainer.initialize();try{t.initialized||(t.manager.init(e.offsetWidth,e.offsetHeight,google.ima.ViewMode.NORMAL),t.manager.start()),t.initialized=!0}catch(e){t.onAdError(e)}}).catch(function(){})}},{key:"resumeContent",value:function(){this.elements.container.style.zIndex="",this.playing=!1,this.player.media.play()}},{key:"pauseContent",value:function(){this.elements.container.style.zIndex=3,this.playing=!0,this.player.media.pause()}},{key:"cancel",value:function(){this.initialized&&this.resumeContent(),this.trigger("error"),this.loadAds()}},{key:"loadAds",value:function(){var t=this;this.managerPromise.then(function(){t.manager&&t.manager.destroy(),t.managerPromise=new Promise(function(e){t.on("loaded",e),t.player.debug.log(t.manager)}),t.requestAds()}).catch(function(){})}},{key:"trigger",value:function(e){for(var t=this,n=arguments.length,i=new Array(1<n?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];e=this.events[e];A.array(e)&&e.forEach(function(e){A.function(e)&&e.apply(t,i)})}},{key:"on",value:function(e,t){return A.array(this.events[e])||(this.events[e]=[]),this.events[e].push(t),this}},{key:"startSafetyTimer",value:function(e,t){var n=this;this.player.debug.log("Safety timer invoked from: ".concat(t)),this.safetyTimer=setTimeout(function(){n.cancel(),n.clearSafetyTimer("startSafetyTimer()")},e)}},{key:"clearSafetyTimer",value:function(e){A.nullOrUndefined(this.safetyTimer)||(this.player.debug.log("Safety timer cleared from: ".concat(e)),clearTimeout(this.safetyTimer),this.safetyTimer=null)}},{key:"enabled",get:function(){var e=this.config;return this.player.isHTML5&&this.player.isVideo&&e.enabled&&(!A.empty(e.publisherId)||A.url(e.tagUrl))}},{key:"tagUrl",get:function(){var e=this.config;if(A.url(e.tagUrl))return e.tagUrl;e={AV_PUBLISHERID:"58c25bb0073ef448b1087ad6",AV_CHANNELID:"5a0458dc28a06145e4519d21",AV_URL:window.location.hostname,cb:Date.now(),AV_WIDTH:640,AV_HEIGHT:480,AV_CDIM2:this.publisherId};return"".concat("https://go.aniview.com/api/adserver6/vast/","?").concat(Ce(e))}}]),$e),Ge=(e(Qe,[{key:"load",value:function(){var e=this;this.player.elements.display.seekTooltip&&(this.player.elements.display.seekTooltip.hidden=this.enabled),this.enabled&&this.getThumbnails().then(function(){e.enabled&&(e.render(),e.determineContainerAutoSizing(),e.loaded=!0)})}},{key:"getThumbnails",value:function(){var n=this;return new Promise(function(e){var t=n.player.config.previewThumbnails.src;if(A.empty(t))throw new Error("Missing previewThumbnails.src config attribute");t=(A.string(t)?[t]:t).map(function(e){return n.getThumbnail(e)});Promise.all(t).then(function(){n.thumbnails.sort(function(e,t){return e.height-t.height}),n.player.debug.log("Preview thumbnails",n.thumbnails),e()})})}},{key:"getThumbnail",value:function(o){var s=this;return new Promise(function(a){ge(o).then(function(e){var t,n={frames:(t=[],e.split(/\r\n\r\n|\n\n|\r\r/).forEach(function(e){var i={};e.split(/\r\n|\n|\r/).forEach(function(e){var t,n;A.number(i.startTime)?!A.empty(e.trim())&&A.empty(i.text)&&(t=d(n=e.trim().split("#xywh="),1),i.text=t[0],n[1]&&(n=d(n[1].split(","),4),i.x=n[0],i.y=n[1],i.w=n[2],i.h=n[3])):(e=e.match(/([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})( ?--> ?)([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})/))&&(i.startTime=60*Number(e[1]||0)*60+60*Number(e[2])+Number(e[3])+Number("0.".concat(e[4])),i.endTime=60*Number(e[6]||0)*60+60*Number(e[7])+Number(e[8])+Number("0.".concat(e[9])))}),i.text&&t.push(i)}),t),height:null,urlPrefix:""};n.frames[0].text.startsWith("/")||n.frames[0].text.startsWith("http://")||n.frames[0].text.startsWith("https://")||(n.urlPrefix=o.substring(0,o.lastIndexOf("/")+1));var i=new Image;i.onload=function(){n.height=i.naturalHeight,n.width=i.naturalWidth,s.thumbnails.push(n),a()},i.src=n.urlPrefix+n.frames[0].text})})}},{key:"startMove",value:function(e){var t;this.loaded&&A.event(e)&&["touchmove","mousemove"].includes(e.type)&&this.player.media.duration&&("touchmove"===e.type?this.seekTime=this.player.media.duration*(this.player.elements.inputs.seek.value/100):(t=100/(t=this.player.elements.progress.getBoundingClientRect()).width*(e.pageX-t.left),this.seekTime=this.player.media.duration*(t/100),this.seekTime<0&&(this.seekTime=0),this.seekTime>this.player.media.duration-1&&(this.seekTime=this.player.media.duration-1),this.mousePosX=e.pageX,this.elements.thumb.time.innerText=ke(this.seekTime)),this.showImageAtCurrentTime())}},{key:"endMove",value:function(){this.toggleThumbContainer(!1,!0)}},{key:"startScrubbing",value:function(e){!1!==e.button&&0!==e.button||(this.mouseDown=!0,this.player.media.duration&&(this.toggleScrubbingContainer(!0),this.toggleThumbContainer(!1,!0),this.showImageAtCurrentTime()))}},{key:"endScrubbing",value:function(){var e=this;this.mouseDown=!1,Math.ceil(this.lastTime)===Math.ceil(this.player.media.currentTime)?this.toggleScrubbingContainer(!1):O.call(this.player,this.player.media,"timeupdate",function(){e.mouseDown||e.toggleScrubbingContainer(!1)})}},{key:"listeners",value:function(){var e=this;this.player.on("play",function(){e.toggleThumbContainer(!1,!0)}),this.player.on("seeked",function(){e.toggleThumbContainer(!1)}),this.player.on("timeupdate",function(){e.lastTime=e.player.media.currentTime})}},{key:"render",value:function(){this.elements.thumb.container=U("div",{class:this.player.config.classNames.previewThumbnails.thumbContainer}),this.elements.thumb.imageContainer=U("div",{class:this.player.config.classNames.previewThumbnails.imageContainer}),this.elements.thumb.container.appendChild(this.elements.thumb.imageContainer);var e=U("div",{class:this.player.config.classNames.previewThumbnails.timeContainer});this.elements.thumb.time=U("span",{},"00:00"),e.appendChild(this.elements.thumb.time),this.elements.thumb.container.appendChild(e),A.element(this.player.elements.progress)&&this.player.elements.progress.appendChild(this.elements.thumb.container),this.elements.scrubbing.container=U("div",{class:this.player.config.classNames.previewThumbnails.scrubbingContainer}),this.player.elements.wrapper.appendChild(this.elements.scrubbing.container)}},{key:"showImageAtCurrentTime",value:function(){var n=this;this.mouseDown?this.setScrubbingContainerSize():this.setThumbContainerSizeAndPos();var i=this.thumbnails[0].frames.findIndex(function(e){return n.seekTime>=e.startTime&&n.seekTime<=e.endTime}),e=0<=i,a=0;this.mouseDown||this.toggleThumbContainer(e),e&&(this.thumbnails.forEach(function(e,t){n.loadedImages.includes(e.frames[i].text)&&(a=t)}),i!==this.showingThumb&&(this.showingThumb=i,this.loadImage(a)))}},{key:"loadImage",value:function(){var e,t=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,i=this.showingThumb,a=this.thumbnails[n],o=a.urlPrefix,s=a.frames[i],r=a.frames[i].text,o=o+r;this.currentImageElement&&this.currentImageElement.dataset.filename===r?(this.showImage(this.currentImageElement,s,n,i,r,!1),this.currentImageElement.dataset.index=i,this.removeOldImages(this.currentImageElement)):(this.loadingImage&&this.usingSprites&&(this.loadingImage.onload=null),(e=new Image).src=o,e.dataset.index=i,e.dataset.filename=r,this.showingThumbFilename=r,this.player.debug.log("Loading image: ".concat(o)),e.onload=function(){return t.showImage(e,s,n,i,r,!0)},this.loadingImage=e,this.removeOldImages(e))}},{key:"showImage",value:function(e,t,n,i,a){var o=!(5<arguments.length&&void 0!==arguments[5])||arguments[5];this.player.debug.log("Showing thumb: ".concat(a,". num: ").concat(i,". qual: ").concat(n,". newimg: ").concat(o)),this.setImageSizeAndOffset(e,t),o&&(this.currentImageContainer.appendChild(e),this.currentImageElement=e,this.loadedImages.includes(a)||this.loadedImages.push(a)),this.preloadNearby(i,!0).then(this.preloadNearby(i,!1)).then(this.getHigherQuality(n,e,t,a))}},{key:"removeOldImages",value:function(i){var a=this;Array.from(this.currentImageContainer.children).forEach(function(e){var t,n;"img"===e.tagName.toLowerCase()&&(t=a.usingSprites?500:1e3,e.dataset.index===i.dataset.index||e.dataset.deleting||(e.dataset.deleting=!0,n=a.currentImageContainer,setTimeout(function(){n.removeChild(e),a.player.debug.log("Removing thumb: ".concat(e.dataset.filename))},t)))})}},{key:"preloadNearby",value:function(t){var s=this,n=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];return new Promise(function(o){setTimeout(function(){var e,i,a=s.thumbnails[0].frames[t].text;s.showingThumbFilename===a&&(e=n?s.thumbnails[0].frames.slice(t):s.thumbnails[0].frames.slice(0,t).reverse(),i=!1,e.forEach(function(e){var t,n=e.text;n===a||s.loadedImages.includes(n)||(i=!0,s.player.debug.log("Preloading thumb filename: ".concat(n)),t=s.thumbnails[0].urlPrefix+n,(e=new Image).src=t,e.onload=function(){s.player.debug.log("Preloaded thumb filename: ".concat(n)),s.loadedImages.includes(n)||s.loadedImages.push(n),o()})}),i||o())},300)})}},{key:"getHigherQuality",value:function(e,t,n,i){var a=this;e<this.thumbnails.length-1&&(t=t.naturalHeight,this.usingSprites&&(t=n.h),t<this.thumbContainerHeight&&setTimeout(function(){a.showingThumbFilename===i&&(a.player.debug.log("Showing higher quality thumb for: ".concat(i)),a.loadImage(e+1))},300))}},{key:"toggleThumbContainer",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=this.player.config.classNames.previewThumbnails.thumbContainerShown;this.elements.thumb.container.classList.toggle(n,e),!e&&t&&(this.showingThumb=null,this.showingThumbFilename=null)}},{key:"toggleScrubbingContainer",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=this.player.config.classNames.previewThumbnails.scrubbingContainerShown;this.elements.scrubbing.container.classList.toggle(t,e),e||(this.showingThumb=null,this.showingThumbFilename=null)}},{key:"determineContainerAutoSizing",value:function(){20<this.elements.thumb.imageContainer.clientHeight&&(this.sizeSpecifiedInCSS=!0)}},{key:"setThumbContainerSizeAndPos",value:function(){var e;this.sizeSpecifiedInCSS||(e=Math.floor(this.thumbContainerHeight*this.thumbAspectRatio),this.elements.thumb.imageContainer.style.height="".concat(this.thumbContainerHeight,"px"),this.elements.thumb.imageContainer.style.width="".concat(e,"px")),this.setThumbContainerPos()}},{key:"setThumbContainerPos",value:function(){var e=this.player.elements.progress.getBoundingClientRect(),t=this.player.elements.container.getBoundingClientRect(),n=this.elements.thumb.container,i=t.left-e.left+10,t=t.right-e.left-n.clientWidth-10,e=this.mousePosX-e.left-n.clientWidth/2;e<i&&(e=i),t<e&&(e=t),n.style.left="".concat(e,"px")}},{key:"setScrubbingContainerSize",value:function(){this.elements.scrubbing.container.style.width="".concat(this.player.media.clientWidth,"px"),this.elements.scrubbing.container.style.height="".concat(this.player.media.clientWidth/this.thumbAspectRatio,"px")}},{key:"setImageSizeAndOffset",value:function(e,t){var n;this.usingSprites&&(n=this.thumbContainerHeight/t.h,e.style.height="".concat(Math.floor(e.naturalHeight*n),"px"),e.style.width="".concat(Math.floor(e.naturalWidth*n),"px"),e.style.left="-".concat(t.x*n,"px"),e.style.top="-".concat(t.y*n,"px"))}},{key:"enabled",get:function(){return this.player.isHTML5&&this.player.isVideo&&this.player.config.previewThumbnails.enabled}},{key:"currentImageContainer",get:function(){return this.mouseDown?this.elements.scrubbing.container:this.elements.thumb.imageContainer}},{key:"usingSprites",get:function(){return Object.keys(this.thumbnails[0].frames[0]).includes("w")}},{key:"thumbAspectRatio",get:function(){return this.usingSprites?this.thumbnails[0].frames[0].w/this.thumbnails[0].frames[0].h:this.thumbnails[0].width/this.thumbnails[0].height}},{key:"thumbContainerHeight",get:function(){return this.mouseDown?Math.floor(this.player.media.clientWidth/this.thumbAspectRatio):Math.floor(this.player.media.clientWidth/this.thumbAspectRatio/4)}},{key:"currentImageElement",get:function(){return this.mouseDown?this.currentScrubbingImageElement:this.currentThumbnailImageElement},set:function(e){this.mouseDown?this.currentScrubbingImageElement=e:this.currentThumbnailImageElement=e}}]),Qe),Xe={insertElements:function(t,e){var n=this;A.string(e)?V(t,this.media,{src:e}):A.array(e)&&e.forEach(function(e){V(t,n.media,e)})},change:function(o){var s=this;R(o,"sources.length")?(se.cancelRequests.call(this),this.destroy.call(this,function(){s.options.quality=[],z(s.media),s.media=null,A.element(s.elements.container)&&s.elements.container.removeAttribute("class");var e=o.sources,t=o.type,n=d(e,1)[0],i=n.provider,a=void 0===i?Me.html5:i,i=n.src,n="html5"===a?t:"div",i="html5"===a?{}:{src:i};Object.assign(s,{provider:a,type:t,supported:te.check(t,a,s.config.playsinline),media:U(n,i)}),s.elements.container.appendChild(s.media),A.boolean(o.autoplay)&&(s.config.autoplay=o.autoplay),s.isHTML5&&(s.config.crossorigin&&s.media.setAttribute("crossorigin",""),s.config.autoplay&&s.media.setAttribute("autoplay",""),A.empty(o.poster)||(s.poster=o.poster),s.config.loop.active&&s.media.setAttribute("loop",""),s.config.muted&&s.media.setAttribute("muted",""),s.config.playsinline&&s.media.setAttribute("playsinline","")),He.addStyleHook.call(s),s.isHTML5&&Xe.insertElements.call(s,"source",e),s.config.title=o.title,Ke.setup.call(s),s.isHTML5&&Object.keys(o).includes("tracks")&&Xe.insertElements.call(s,"track",o.tracks),(s.isHTML5||s.isEmbed&&!s.supported.ui)&&He.build.call(s),s.isHTML5&&s.media.load(),s.previewThumbnails&&s.previewThumbnails.load(),s.fullscreen.update()},!0)):this.debug.warn("Invalid source format")}};function Qe(e){r(this,Qe),this.player=e,this.thumbnails=[],this.loaded=!1,this.lastMouseMoveTime=Date.now(),this.mouseDown=!1,this.loadedImages=[],this.elements={thumb:{},scrubbing:{}},this.load()}function $e(e){var n=this;r(this,$e),this.player=e,this.config=e.config.ads,this.playing=!1,this.initialized=!1,this.elements={container:null,displayContainer:null},this.manager=null,this.loader=null,this.cuePoints=null,this.events={},this.safetyTimer=null,this.countdownTimer=null,this.managerPromise=new Promise(function(e,t){n.on("loaded",e),n.on("error",t)}),this.load()}var Je=(e(et,[{key:"play",value:function(){var e=this;return A.function(this.media.play)?(this.ads&&this.ads.enabled&&this.ads.managerPromise.then(function(){return e.ads.play()}).catch(function(){return e.media.play()}),this.media.play()):null}},{key:"pause",value:function(){this.playing&&A.function(this.media.pause)&&this.media.pause()}},{key:"togglePlay",value:function(e){(A.boolean(e)?e:!this.playing)?this.play():this.pause()}},{key:"stop",value:function(){this.isHTML5?(this.pause(),this.restart()):A.function(this.media.stop)&&this.media.stop()}},{key:"restart",value:function(){this.currentTime=0}},{key:"rewind",value:function(e){this.currentTime=this.currentTime-(A.number(e)?e:this.config.seekTime)}},{key:"forward",value:function(e){this.currentTime=this.currentTime+(A.number(e)?e:this.config.seekTime)}},{key:"increaseVolume",value:function(e){var t=this.media.muted?0:this.volume;this.volume=t+(A.number(e)?e:0)}},{key:"decreaseVolume",value:function(e){this.increaseVolume(-e)}},{key:"toggleCaptions",value:function(e){Ae.toggle.call(this,e,!1)}},{key:"airplay",value:function(){te.airplay&&this.media.webkitShowPlaybackTargetPicker()}},{key:"toggleControls",value:function(e){if(!this.supported.ui||this.isAudio)return!1;var t=G(this.elements.container,this.config.classNames.hideControls),e=void 0===e?void 0:!e,e=Y(this.elements.container,this.config.classNames.hideControls,e);return e&&this.config.controls.includes("settings")&&!A.empty(this.config.settings)&&Te.toggleMenu.call(this,!1),e!==t&&(t=e?"controlshidden":"controlsshown",F.call(this,this.media,t)),!e}},{key:"on",value:function(e,t){N.call(this,this.elements.container,e,t)}},{key:"once",value:function(e,t){O.call(this,this.elements.container,e,t)}},{key:"off",value:function(e,t){D(this.elements.container,e,t)}},{key:"destroy",value:function(e){var t,n=this,i=1<arguments.length&&void 0!==arguments[1]&&arguments[1];this.ready&&(t=function(){document.body.style.overflow="",n.embed=null,i?(Object.keys(n.elements).length&&(z(n.elements.buttons.play),z(n.elements.captions),z(n.elements.controls),z(n.elements.wrapper),n.elements.buttons.play=null,n.elements.captions=null,n.elements.controls=null,n.elements.wrapper=null),A.function(e)&&e()):(function(){this&&this.eventListeners&&(this.eventListeners.forEach(function(e){var t=e.element,n=e.type,i=e.callback,e=e.options;t.removeEventListener(n,i,e)}),this.eventListeners=[])}.call(n),W(n.elements.original,n.elements.container),F.call(n,n.elements.original,"destroyed",!0),A.function(e)&&e.call(n.elements.original),n.ready=!1,setTimeout(function(){n.elements=null,n.media=null},200))},this.stop(),clearTimeout(this.timers.loading),clearTimeout(this.timers.controls),clearTimeout(this.timers.resized),this.isHTML5?(He.toggleNativeControls.call(this,!0),t()):this.isYouTube?(clearInterval(this.timers.buffering),clearInterval(this.timers.playing),null!==this.embed&&A.function(this.embed.destroy)&&this.embed.destroy(),t()):this.isVimeo&&(null!==this.embed&&this.embed.unload().then(t),setTimeout(t,200)))}},{key:"supports",value:function(e){return te.mime.call(this,e)}},{key:"isHTML5",get:function(){return this.provider===Me.html5}},{key:"isEmbed",get:function(){return this.isYouTube||this.isVimeo}},{key:"isYouTube",get:function(){return this.provider===Me.youtube}},{key:"isVimeo",get:function(){return this.provider===Me.vimeo}},{key:"isVideo",get:function(){return this.type===Pe.video}},{key:"isAudio",get:function(){return this.type===Pe.audio}},{key:"playing",get:function(){return Boolean(this.ready&&!this.paused&&!this.ended)}},{key:"paused",get:function(){return Boolean(this.media.paused)}},{key:"stopped",get:function(){return Boolean(this.paused&&0===this.currentTime)}},{key:"ended",get:function(){return Boolean(this.media.ended)}},{key:"currentTime",set:function(e){var t;this.duration&&(t=A.number(e)&&0<e,this.media.currentTime=t?Math.min(e,this.duration):0,this.debug.log("Seeking to ".concat(this.currentTime," seconds")))},get:function(){return Number(this.media.currentTime)}},{key:"buffered",get:function(){var e=this.media.buffered;return A.number(e)?e:e&&e.length&&0<this.duration?e.end(0)/this.duration:0}},{key:"seeking",get:function(){return Boolean(this.media.seeking)}},{key:"duration",get:function(){var e=parseFloat(this.config.duration),t=(this.media||{}).duration,t=A.number(t)&&t!==1/0?t:0;return e||t}},{key:"volume",set:function(e){var t=e;A.string(t)&&(t=Number(t)),A.number(t)||(t=this.storage.get("volume")),A.number(t)||(t=this.config.volume),1<t&&(t=1),t<0&&(t=0),this.config.volume=t,this.media.volume=t,!A.empty(e)&&this.muted&&0<t&&(this.muted=!1)},get:function(){return Number(this.media.volume)}},{key:"muted",set:function(e){A.boolean(e)||(e=this.storage.get("muted")),A.boolean(e)||(e=this.config.muted),this.config.muted=e,this.media.muted=e},get:function(){return Boolean(this.media.muted)}},{key:"hasAudio",get:function(){return!this.isHTML5||!!this.isAudio||Boolean(this.media.mozHasAudio)||Boolean(this.media.webkitAudioDecodedByteCount)||Boolean(this.media.audioTracks&&this.media.audioTracks.length)}},{key:"speed",set:function(e){var t=this,n=null;A.number(e)&&(n=e),A.number(n)||(n=this.storage.get("speed")),A.number(n)||(n=this.config.speed.selected);var i=this.minimumSpeed,e=this.maximumSpeed,n=function(e,t,n){e=0<arguments.length&&void 0!==e?e:0,t=1<arguments.length&&void 0!==t?t:0,n=2<arguments.length&&void 0!==n?n:255;return Math.min(Math.max(e,t),n)}(n,i,e);this.config.speed.selected=n,setTimeout(function(){t.media.playbackRate=n},0)},get:function(){return Number(this.media.playbackRate)}},{key:"minimumSpeed",get:function(){return this.isYouTube?Math.min.apply(Math,a(this.options.speed)):this.isVimeo?.5:.0625}},{key:"maximumSpeed",get:function(){return this.isYouTube?Math.max.apply(Math,a(this.options.speed)):this.isVimeo?2:16}},{key:"quality",set:function(e){var t,n,i=this.config.quality,a=this.options.quality;a.length&&(t=[!A.empty(e)&&Number(e),this.storage.get("quality"),i.selected,i.default].find(A.number),e=!0,a.includes(t)||(a=a,n=t,a=A.array(a)&&a.length?a.reduce(function(e,t){return Math.abs(t-n)<Math.abs(e-n)?t:e}):null,this.debug.warn("Unsupported quality option: ".concat(t,", using ").concat(a," instead")),t=a,e=!1),i.selected=t,this.media.quality=t,e&&this.storage.set({quality:t}))},get:function(){return this.media.quality}},{key:"loop",set:function(e){e=A.boolean(e)?e:this.config.loop.active;this.config.loop.active=e,this.media.loop=e},get:function(){return Boolean(this.media.loop)}},{key:"source",set:function(e){Xe.change.call(this,e)},get:function(){return this.media.currentSrc}},{key:"download",get:function(){var e=this.config.urls.download;return A.url(e)?e:this.source},set:function(e){A.url(e)&&(this.config.urls.download=e,Te.setDownloadUrl.call(this))}},{key:"poster",set:function(e){this.isVideo?He.setPoster.call(this,e,!1).catch(function(){}):this.debug.warn("Poster can only be set for video")},get:function(){return this.isVideo?this.media.getAttribute("poster"):null}},{key:"ratio",get:function(){if(!this.isVideo)return null;var e=ie(ae.call(this));return A.array(e)?e.join(":"):e},set:function(e){this.isVideo?A.string(e)&&ne(e)?(this.config.ratio=e,oe.call(this)):this.debug.error("Invalid aspect ratio specified (".concat(e,")")):this.debug.warn("Aspect ratio can only be set for video")}},{key:"autoplay",set:function(e){e=A.boolean(e)?e:this.config.autoplay;this.config.autoplay=e},get:function(){return Boolean(this.config.autoplay)}},{key:"currentTrack",set:function(e){Ae.set.call(this,e,!1)},get:function(){var e=this.captions,t=e.toggled,e=e.currentTrack;return t?e:-1}},{key:"language",set:function(e){Ae.setLanguage.call(this,e,!1)},get:function(){return(Ae.getCurrentTrack.call(this)||{}).language}},{key:"pip",set:function(e){te.pip&&(e=A.boolean(e)?e:!this.pip,A.function(this.media.webkitSetPresentationMode)&&this.media.webkitSetPresentationMode(e?Ie:"inline"),A.function(this.media.requestPictureInPicture)&&(!this.pip&&e?this.media.requestPictureInPicture():this.pip&&!e&&document.exitPictureInPicture()))},get:function(){return te.pip?A.empty(this.media.webkitPresentationMode)?this.media===document.pictureInPictureElement:this.media.webkitPresentationMode===Ie:null}}],[{key:"supported",value:function(e,t,n){return te.check(e,t,n)}},{key:"loadSprite",value:ye},{key:"setup",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=null;return A.string(e)?n=Array.from(document.querySelectorAll(e)):A.nodeList(e)?n=Array.from(e):A.array(e)&&(n=e.filter(A.element)),A.empty(n)?null:n.map(function(e){return new et(e,t)})}}]),et);function et(e,t){var n=this;if(r(this,et),this.timers={},this.ready=!1,this.loading=!1,this.failed=!1,this.touch=te.touch,this.media=e,A.string(this.media)&&(this.media=document.querySelectorAll(this.media)),(window.jQuery&&this.media instanceof jQuery||A.nodeList(this.media)||A.array(this.media))&&(this.media=this.media[0]),this.config=H({},Se,et.defaults,t||{},function(){try{return JSON.parse(n.media.getAttribute("data-plyr-config"))}catch(e){return{}}}()),this.elements={container:null,captions:null,buttons:{},display:{},progress:{},inputs:{},settings:{popup:null,menu:null,panels:{},buttons:{}}},this.captions={active:null,currentTrack:-1,meta:new WeakMap},this.fullscreen={active:!1},this.options={speed:[],quality:[]},this.debug=new _e(this.config.debug),this.debug.log("Config",this.config),this.debug.log("Support",te),!A.nullOrUndefined(this.media)&&A.element(this.media))if(this.media.plyr)this.debug.warn("Target already setup");else if(this.config.enabled)if(te.check().api){t=this.media.cloneNode(!0);t.autoplay=!1,this.elements.original=t;var i=this.media.tagName.toLowerCase(),a=null,o=null;switch(i){case"div":var s,a=this.media.querySelector("iframe");if(A.element(a)?(o=xe(a.getAttribute("src")),this.provider=(s=o.toString(),/^(https?:\/\/)?(www\.)?(youtube\.com|youtube-nocookie\.com|youtu\.?be)\/.+$/.test(s)?Me.youtube:/^https?:\/\/player.vimeo.com\/video\/\d{0,9}(?=\b|\/)/.test(s)?Me.vimeo:null),this.elements.container=this.media,this.media=a,this.elements.container.className="",o.search.length&&((s=["1","true"]).includes(o.searchParams.get("autoplay"))&&(this.config.autoplay=!0),s.includes(o.searchParams.get("loop"))&&(this.config.loop.active=!0),this.isYouTube?(this.config.playsinline=s.includes(o.searchParams.get("playsinline")),this.config.youtube.hl=o.searchParams.get("hl")):this.config.playsinline=!0)):(this.provider=this.media.getAttribute(this.config.attributes.embed.provider),this.media.removeAttribute(this.config.attributes.embed.provider)),A.empty(this.provider)||!Object.keys(Me).includes(this.provider))return void this.debug.error("Setup failed: Invalid provider");this.type=Pe.video;break;case"video":case"audio":this.type=i,this.provider=Me.html5,this.media.hasAttribute("crossorigin")&&(this.config.crossorigin=!0),this.media.hasAttribute("autoplay")&&(this.config.autoplay=!0),(this.media.hasAttribute("playsinline")||this.media.hasAttribute("webkit-playsinline"))&&(this.config.playsinline=!0),this.media.hasAttribute("muted")&&(this.config.muted=!0),this.media.hasAttribute("loop")&&(this.config.loop.active=!0);break;default:return void this.debug.error("Setup failed: unsupported type")}this.supported=te.check(this.type,this.provider,this.config.playsinline),this.supported.api?(this.eventListeners=[],this.listeners=new qe(this),this.storage=new pe(this),this.media.plyr=this,A.element(this.elements.container)||(this.elements.container=U("div",{tabindex:0}),q(this.media,this.elements.container)),He.addStyleHook.call(this),Ke.setup.call(this),this.config.debug&&N.call(this,this.elements.container,this.config.events.join(" "),function(e){n.debug.log("event: ".concat(e.type))}),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&He.build.call(this),this.listeners.container(),this.listeners.global(),this.fullscreen=new Oe(this),this.config.ads.enabled&&(this.ads=new Ye(this)),this.isHTML5&&this.config.autoplay&&setTimeout(function(){return n.play()},10),this.lastSeekTime=0,this.config.previewThumbnails.enabled&&(this.previewThumbnails=new Ge(this))):this.debug.error("Setup failed: no support")}else this.debug.error("Setup failed: no support");else this.debug.error("Setup failed: disabled by config");else this.debug.error("Setup failed: no suitable element passed")}return Je.defaults=JSON.parse(JSON.stringify(Se)),Je}),function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.PhotoSwipeUI_Default=t()}(this,function(){"use strict";return function(i,r){function e(e){if(S)return!0;e=e||window.event,A.timeToIdle&&A.mouseUsed&&!w&&R();for(var t,n,i=(e.target||e.srcElement).getAttribute("class")||"",a=0;a<q.length;a++)(t=q[a]).onTap&&-1<i.indexOf("pswp__"+t.name)&&(t.onTap(),n=!0);n&&(e.stopPropagation&&e.stopPropagation(),S=!0,e=r.features.isOldAndroid?600:30,setTimeout(function(){S=!1},e))}function t(e,t,n){r[(n?"add":"remove")+"Class"](e,"pswp__"+t)}function n(){var e=1===A.getNumItemsFn();e!==E&&(t(m,"ui--one-slide",e),E=e)}function a(){t(v,"share-modal--hidden",N)}function o(){return(N=!N)?(r.removeClass(v,"pswp__share-modal--fade-in"),setTimeout(function(){N&&a()},300)):(a(),setTimeout(function(){N||r.addClass(v,"pswp__share-modal--fade-in")},30)),N||O(),0}function s(e){var t=(e=e||window.event).target||e.srcElement;return i.shout("shareLinkClick",e,t),!(!t.href||!t.hasAttribute("download")&&(window.open(t.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100)),N||o(),1))}function l(e){for(var t=0;t<A.closeElClasses.length;t++)if(r.hasClass(e,"pswp__"+A.closeElClasses[t]))return!0}function c(e){(e=(e=e||window.event).relatedTarget||e.toElement)&&"HTML"!==e.nodeName||(clearTimeout(M),M=setTimeout(function(){P.setIdle(!0)},A.timeToIdleOutside))}function u(e){var t,n=e.vGap;!i.likelyTouchDevice||A.mouseUsed||screen.width>A.fitControlsWidth?(t=A.barsSize,A.captionEl&&"auto"===t.bottom?(f||((f=r.createEl("pswp__caption pswp__caption--fake")).appendChild(r.createEl("pswp__caption__center")),m.insertBefore(f,p),r.addClass(m,"pswp__ui--fit")),A.addCaptionHTMLFn(e,f,!0)?(e=f.clientHeight,n.bottom=parseInt(e,10)||44):n.bottom=t.top):n.bottom="auto"===t.bottom?0:t.bottom,n.top=t.top):n.top=n.bottom=0}function d(){function e(e){if(e)for(var t=e.length,n=0;n<t;n++){a=e[n],o=a.className;for(var i=0;i<q.length;i++)s=q[i],-1<o.indexOf("pswp__"+s.name)&&(A[s.option]?(r.removeClass(a,"pswp__element--disabled"),s.onInit&&s.onInit(a)):r.addClass(a,"pswp__element--disabled"))}}var a,o,s;e(m.children);var t=r.getChildByClass(m,"pswp__top-bar");t&&e(t.children)}var h,m,p,f,g,y,v,b,w,k,T,x,C,E,A,S,I,M,P=this,_=!1,L=!0,N=!0,D={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(e,t){return e.title?(t.children[0].innerHTML=e.title,!0):(t.children[0].innerHTML="",!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],getImageURLForShare:function(){return i.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return i.currItem.title||""},indexIndicatorSep:" / ",fitControlsWidth:1200},O=function(){for(var e,t,n,i,a="",o=0;o<A.shareButtons.length;o++)e=A.shareButtons[o],t=A.getImageURLForShare(e),n=A.getPageURLForShare(e),i=A.getTextForShare(e),a+='<a href="'+e.url.replace("{{url}}",encodeURIComponent(n)).replace("{{image_url}}",encodeURIComponent(t)).replace("{{raw_image_url}}",t).replace("{{text}}",encodeURIComponent(i))+'" target="_blank" class="pswp__share--'+e.id+'"'+(e.download?"download":"")+">"+e.label+"</a>",A.parseShareButtonOut&&(a=A.parseShareButtonOut(e,a));v.children[0].innerHTML=a,v.children[0].onclick=s},F=0,R=function(){clearTimeout(M),F=0,w&&P.setIdle(!1)},H=function(e){x!==e&&(t(T,"preloader--active",!e),x=e)},q=[{name:"caption",option:"captionEl",onInit:function(e){p=e}},{name:"share-modal",option:"shareEl",onInit:function(e){v=e},onTap:function(){o()}},{name:"button--share",option:"shareEl",onInit:function(e){y=e},onTap:function(){o()}},{name:"button--zoom",option:"zoomEl",onTap:i.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(e){g=e}},{name:"button--close",option:"closeEl",onTap:i.close},{name:"button--arrow--left",option:"arrowEl",onTap:i.prev},{name:"button--arrow--right",option:"arrowEl",onTap:i.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){h.isFullscreen()?h.exit():h.enter()}},{name:"preloader",option:"preloaderEl",onInit:function(e){T=e}}];P.init=function(){var t;r.extend(i.options,D,!0),A=i.options,m=r.getChildByClass(i.scrollWrap,"pswp__ui"),(k=i.listen)("onVerticalDrag",function(e){L&&e<.95?P.hideControls():!L&&.95<=e&&P.showControls()}),k("onPinchClose",function(e){L&&e<.9?(P.hideControls(),t=!0):t&&!L&&.9<e&&P.showControls()}),k("zoomGestureEnded",function(){(t=!1)&&!L&&P.showControls()}),k("beforeChange",P.update),k("doubleTap",function(e){var t=i.currItem.initialZoomLevel;i.getZoomLevel()!==t?i.zoomTo(t,e,333):i.zoomTo(A.getDoubleTapZoom(!1,i.currItem),e,333)}),k("preventDragEvent",function(e,t,n){var i=e.target||e.srcElement;i&&i.getAttribute("class")&&-1<e.type.indexOf("mouse")&&(0<i.getAttribute("class").indexOf("__caption")||/(SMALL|STRONG|EM)/i.test(i.tagName))&&(n.prevent=!1)}),k("bindEvents",function(){r.bind(m,"pswpTap click",e),r.bind(i.scrollWrap,"pswpTap",P.onGlobalTap),i.likelyTouchDevice||r.bind(i.scrollWrap,"mouseover",P.onMouseOver)}),k("unbindEvents",function(){N||o(),I&&clearInterval(I),r.unbind(document,"mouseout",c),r.unbind(document,"mousemove",R),r.unbind(m,"pswpTap click",e),r.unbind(i.scrollWrap,"pswpTap",P.onGlobalTap),r.unbind(i.scrollWrap,"mouseover",P.onMouseOver),h&&(r.unbind(document,h.eventK,P.updateFullscreen),h.isFullscreen()&&(A.hideAnimationDuration=0,h.exit()),h=null)}),k("destroy",function(){A.captionEl&&(f&&m.removeChild(f),r.removeClass(p,"pswp__caption--empty")),v&&(v.children[0].onclick=null),r.removeClass(m,"pswp__ui--over-close"),r.addClass(m,"pswp__ui--hidden"),P.setIdle(!1)}),A.showAnimationDuration||r.removeClass(m,"pswp__ui--hidden"),k("initialZoomIn",function(){A.showAnimationDuration&&r.removeClass(m,"pswp__ui--hidden")}),k("initialZoomOut",function(){r.addClass(m,"pswp__ui--hidden")}),k("parseVerticalMargin",u),d(),A.shareEl&&y&&v&&(N=!0),n(),A.timeToIdle&&k("mouseUsed",function(){r.bind(document,"mousemove",R),r.bind(document,"mouseout",c),I=setInterval(function(){2===++F&&P.setIdle(!0)},A.timeToIdle/2)}),A.fullscreenEl&&!r.features.isOldAndroid&&((h=h||P.getFullscreenAPI())?(r.bind(document,h.eventK,P.updateFullscreen),P.updateFullscreen(),r.addClass(i.template,"pswp--supports-fs")):r.removeClass(i.template,"pswp--supports-fs")),A.preloaderEl&&(H(!0),k("beforeChange",function(){clearTimeout(C),C=setTimeout(function(){i.currItem&&i.currItem.loading?i.allowProgressiveImg()&&(!i.currItem.img||i.currItem.img.naturalWidth)||H(!1):H(!0)},A.loadingIndicatorDelay)}),k("imageLoadComplete",function(e,t){i.currItem===t&&H(!0)}))},P.setIdle=function(e){t(m,"ui--idle",w=e)},P.update=function(){_=!(!L||!i.currItem)&&(P.updateIndexIndicator(),A.captionEl&&(A.addCaptionHTMLFn(i.currItem,p),t(p,"caption--empty",!i.currItem.title)),!0),N||o(),n()},P.updateFullscreen=function(e){e&&setTimeout(function(){i.setScrollOffset(0,r.getScrollY())},50),r[(h.isFullscreen()?"add":"remove")+"Class"](i.template,"pswp--fs")},P.updateIndexIndicator=function(){A.counterEl&&(g.innerHTML=i.getCurrentIndex()+1+A.indexIndicatorSep+A.getNumItemsFn())},P.onGlobalTap=function(e){var t=(e=e||window.event).target||e.srcElement;if(!S)if(e.detail&&"mouse"===e.detail.pointerType)l(t)?i.close():r.hasClass(t,"pswp__img")&&(1===i.getZoomLevel()&&i.getZoomLevel()<=i.currItem.fitRatio?A.clickToCloseNonZoomable&&i.close():i.toggleDesktopZoom(e.detail.releasePoint));else if(A.tapToToggleControls&&(L?P.hideControls():P.showControls()),A.tapToClose&&(r.hasClass(t,"pswp__img")||l(t)))return void i.close()},P.onMouseOver=function(e){e=(e=e||window.event).target||e.srcElement;t(m,"ui--over-close",l(e))},P.hideControls=function(){r.addClass(m,"pswp__ui--hidden"),L=!1},P.showControls=function(){L=!0,_||P.update(),r.removeClass(m,"pswp__ui--hidden")},P.supportsFullscreen=function(){var e=document;return!!(e.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.msExitFullscreen)},P.getFullscreenAPI=function(){var e,t=document.documentElement,n="fullscreenchange";return t.requestFullscreen?e={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:n}:t.mozRequestFullScreen?e={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+n}:t.webkitRequestFullscreen?e={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+n}:t.msRequestFullscreen&&(e={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),e&&(e.enter=function(){return b=A.closeOnScroll,A.closeOnScroll=!1,"webkitRequestFullscreen"!==this.enterK?i.template[this.enterK]():void i.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT)},e.exit=function(){return A.closeOnScroll=b,document[this.exitK]()},e.isFullscreen=function(){return document[this.elementK]}),e}}});
